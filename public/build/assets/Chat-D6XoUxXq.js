import{_ as E}from"./ModalLayout-CfbJL3TF.js";import{_ as F}from"./AdminLayout-CkHLS1ig.js";import{E as W,d as Z,P as q}from"./Picker-DyJyJjpE.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as c}from"./iconify-BltkxOlk.js";import{g as r,o as l,c as R,w as y,a as e,b as i,f as a,j as B,t as p,h,F as A,u as n,p as T,m as U}from"./app-B4vi-FP8.js";import"./ResponsiveNavLink-C63RnJhj.js";const t=u=>(T("data-v-c5b78368"),u=u(),U(),u),Y={class:"flex justify-end mb-5"},G={class:"text-white flex justify-center"},J={class:"w-[50%] border border-white h-auto rounded-xl p-2"},L=t(()=>e("div",{class:"relative mb-10"},[e("input",{class:"w-full text-black rounded-xl p-2 pr-12 border border-red-300 focus:border-red-500 focus:outline-none",type:"text",placeholder:"Recherche"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-search absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),O=["onClick"],P={class:"flex items-center p-2"},X=t(()=>e("div",{class:"w-20 h-20 rounded-full overflow-hidden border border-white"},[e("img",{class:"w-full h-full object-cover",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdyhj65-Cz6UvgVh8YUCAQM_ElfcG0gJJ7NA&s",alt:""})],-1)),Q={class:"ml-5"},K={class:"font-semibold text-[25px]"},ee={class:"flex items-center"},te=t(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",fill:"#f87171"}),e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",stroke:"#f87171","stroke-width":"1.5"}),e("path",{d:"M12 15l4-4-4-4",stroke:"#f87171","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),se={class:"font-sans text-[12px] ml-1"},oe=t(()=>e("svg",{class:"mr-1 absolute left-[70px] bottom-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"green"},[e("circle",{cx:"8",cy:"8",r:"8"})],-1)),le={class:"absolute right-4 top-1/2 transform -translate-y-1/2"},ae=t(()=>e("circle",{cx:"12",cy:"6",r:"2",fill:"#333"},null,-1)),ie=t(()=>e("circle",{cx:"12",cy:"12",r:"2",fill:"#333"},null,-1)),ne=t(()=>e("circle",{cx:"12",cy:"18",r:"2",fill:"#333"},null,-1)),re=[ae,ie,ne],de={key:0,class:"absolute right-[10px] top-[25px] border bg-[#1e293b] rounded p-2 w-[200px]"},ce=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),he=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),ue=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),xe=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),pe=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),_e=[ce,he,ue,xe,pe],ve={class:"flex justify-center"},me={key:0,class:"flex text-white w-[100%]"},we={class:"w-full"},fe={class:"flex items-center"},be=t(()=>e("div",{class:"w-[100px] h-[100px] relative rounded-full bg-red-500"},[e("img",{class:"w-[100px] h-[100px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"}),e("span",{class:"w-[20px] border bg-green-500 h-[20px] right-[6px] bottom-[6px] absolute rounded-full"})],-1)),ge={class:"w-[75%] pl-10"},ke={class:"text-2xl"},ye=t(()=>e("span",{class:"text-sm"},"4520 messages",-1)),Me={key:0,class:"border bg-[#1e293b] rounded p-2 w-[200px] absolute right-[18px] top-[35px]"},Ce=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),je=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),Be=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir contenue multimedia",-1)),Ae=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),He=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),Ve=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),$e=[Ce,je,Be,Ae,He,Ve],Ie={key:0,class:"mt-10 flex"},De=t(()=>e("div",{class:"min-w-[50px]"},[e("img",{class:"w-[50px] h-[50px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"})],-1)),Se={class:"mx-5"},ze={class:"relative max-w-[50%] min-w-[100px] py-5 px-5 border rounded-tr-[20px] rounded-bl-[20px] min-h-[50px]"},Ee=["src"],Fe=t(()=>e("span",{class:"text-sm ml-5 text-white mt-3"},"20:45",-1)),We={key:1,class:"mt-10"},Ze={class:"mx-5 justify-end flex"},qe={class:"relative bg-red-400 max-w-[50%] py-5 px-5 rounded-tl-[20px] rounded-br-[20px] min-h-[50px]"},Ne={key:0,class:"justify-end flex"},Re=["src"],Te=t(()=>e("span",{class:"justify-end mt-3 flex text-sm mr-5 text-white"},"20:45",-1)),Ue={class:"flex w-full mt-2 h-20 bg-[#1e293b] text-black z-50 border-none rounded-t-2xl"},Ye={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Ge=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Je={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Le=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Oe={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Pe=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Xe={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Qe=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Ke={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},et=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),tt={class:"flex justify-end items-center mt-2"},st={class:"flex items-center w-[20%]"},ot={class:"ml-1"},lt={class:"ml-5"},at={class:"w-[75%] ml-5 flex items-center"},it={class:"text-black w-full rounded-2xl"},nt={class:"relative w-full"},rt={key:0,class:"absolute right-2 bottom-[50px] z-[9999]"},dt=t(()=>e("input",{class:"border-none text-black w-full rounded-2xl pr-10 pl-4 py-2",type:"text"},null,-1)),ct={__name:"Chat",props:{conversations:{type:Array}},setup(u){const m=r(!1),H=new W(Z);r("");const V=d=>{f.value+=d.native},M=r(null),C=r(null),$=async d=>{const o=d.target.files[0];if(o){const s=new FileReader;s.onload=async()=>{C.value=await s.result},s.readAsDataURL(o)}},w=r([]),f=r(""),x=r(null),_=r(!1),v=r(null),I=async d=>{const o=await window.axios.get("/admin/getMessage/"+d.id);x.value=d,w.value=o.data.messages,_.value=!1,j()},D=async()=>{const d={message:f.value,conversation_id:x.value.id,file:C.value},o=await window.axios.post("/admin/sendMessage",d);w.value.push(o.data.message),x.value.last_message=o.data.message,f.value=await"",await j()},j=()=>{v.value&&(v.value.scrollTop=v.value.scrollHeight)},b=r(!1),g=r(!1),S=()=>{g.value=!g.value};return(d,o)=>(l(),R(F,null,{default:y(()=>[e("div",Y,[e("button",{class:"px-5 border hover:bg-red-400",onClick:o[0]||(o[0]=s=>_.value=!0)},"Conversation")]),i(E,{classes:"text-white w-[75%]",isOpen:_.value},{content:y(()=>[e("div",G,[e("div",J,[L,(l(!0),a(A,null,B(u.conversations,(s,k)=>(l(),a("div",{key:k,class:"relative bg-[#1a1a1a] hover:bg-[#1e293b] transition-colors duration-300"},[e("div",{onClick:z=>I(s),ss:"flex"},[e("div",P,[X,e("div",Q,[e("p",K,p(s.user.name),1),e("div",ee,[te,e("p",se,p(s.last_message.message),1)])])])],8,O),oe,e("div",le,[(l(),a("svg",{class:"relative",onClick:o[1]||(o[1]=z=>b.value=!b.value),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},re)),b.value===!0?(l(),a("div",de,_e)):h("",!0)])]))),128))])])]),footer:y(()=>[e("div",ve,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:o[2]||(o[2]=s=>_.value=!1)},"fermer")])]),_:1},8,["isOpen"]),x.value?(l(),a("div",me,[e("div",we,[e("div",fe,[be,e("div",ge,[e("h1",ke,p(x.value.user.name),1),ye]),e("div",{onClick:S,class:"relative"},[i(n(c),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"ant-design:more-outlined"}),g.value===!0?(l(),a("div",Me,$e)):h("",!0)])]),e("div",{ref_key:"chatContainer",ref:v,class:"chat-container"},[(l(!0),a(A,null,B(w.value,(s,k)=>(l(),a("div",{key:k},[d.$attrs.auth.user.id!==s.user_id?(l(),a("div",Ie,[De,e("div",Se,[e("div",ze,p(s.message),1),s.mediable&&s.mediable.length>0?(l(),a("img",{key:0,class:"w-[25%] h-auto border rounded mt-3",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Ee)):h("",!0),Fe])])):(l(),a("div",We,[e("div",Ze,[e("div",qe,p(s.message),1)]),s.mediable&&s.mediable.length>0?(l(),a("div",Ne,[e("img",{class:"w-[25%] h-auto border border-red-400 rounded mt-3 mr-5",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Re)])):h("",!0),Te]))]))),128))],512),e("div",Ue,[e("div",Ye,[Ge,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Je,[Le,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Oe,[Pe,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Xe,[Qe,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Ke,[et,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})])]),e("div",tt,[e("div",st,[e("div",ot,[i(n(c),{onClick:o[3]||(o[3]=s=>{M.value.click()}),class:"cursor-pointer w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"gravity-ui:picture"}),e("input",{type:"file",ref_key:"fileInput",ref:M,onChange:$,class:"hidden"},null,544)]),e("div",lt,[i(n(c),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:file-bold"})])]),e("div",at,[e("div",it,[e("div",nt,[m.value?(l(),a("span",rt,[i(n(q),{data:n(H),set:"twitter",onSelect:V},null,8,["data"])])):h("",!0),dt,i(n(c),{onClick:o[4]||(o[4]=s=>m.value=!m.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 text-[#1e293b]",icon:"fluent:emoji-smile-slight-24-filled"})])]),e("div",{onClick:D,class:"w-10 h-10"},[i(n(c),{class:"w-10 h-10 text-[#1e293b] ml-1",icon:"fluent:send-48-filled"})])])])])])):h("",!0)]),_:1}))}},wt=N(ct,[["__scopeId","data-v-c5b78368"]]);export{wt as default};
