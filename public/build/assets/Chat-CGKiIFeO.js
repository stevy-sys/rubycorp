import{g as i,o as l,c as F,w as _,a as e,b as r,f as a,j as $,t as m,h as c,F as B,u as d,e as S,l as W,p as Z,m as N}from"./app-COM5gjLY.js";import{_ as z}from"./ModalLayout-Dj-Yypjq.js";import{_ as q}from"./AdminLayout-C1dG7CXQ.js";import{E as O,d as R,P as T}from"./Picker-C6xGmPeH.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as u}from"./iconify-89WtQoFf.js";import"./ResponsiveNavLink-NchqB5Kc.js";const o=h=>(Z("data-v-76086aac"),h=h(),N(),h),Y={class:"flex justify-end mb-5"},G={class:"text-white flex justify-center"},J={class:"w-[50%] border border-white h-auto rounded-xl p-2"},L=o(()=>e("div",{class:"relative mb-10"},[e("input",{class:"w-full text-black rounded-xl p-2 pr-12 border border-red-300 focus:border-red-500 focus:outline-none",type:"text",placeholder:"Recherche"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-search absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),P=["onClick"],X={class:"flex items-center p-2"},Q=o(()=>e("div",{class:"w-20 h-20 rounded-full overflow-hidden border border-white"},[e("img",{class:"w-full h-full object-cover",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdyhj65-Cz6UvgVh8YUCAQM_ElfcG0gJJ7NA&s",alt:""})],-1)),K={class:"ml-5"},ee={class:"font-semibold text-[25px]"},te={class:"flex items-center"},se=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",fill:"#f87171"}),e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",stroke:"#f87171","stroke-width":"1.5"}),e("path",{d:"M12 15l4-4-4-4",stroke:"#f87171","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),oe={class:"font-sans text-[12px] ml-1"},le=o(()=>e("svg",{class:"mr-1 absolute left-[70px] bottom-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"green"},[e("circle",{cx:"8",cy:"8",r:"8"})],-1)),ae={class:"absolute z-100 right-4 top-1/2 transform -translate-y-1/2"},ie=o(()=>e("circle",{cx:"12",cy:"6",r:"2",fill:"#333"},null,-1)),ne=o(()=>e("circle",{cx:"12",cy:"12",r:"2",fill:"#333"},null,-1)),re=o(()=>e("circle",{cx:"12",cy:"18",r:"2",fill:"#333"},null,-1)),de=[ie,ne,re],ce={key:0,class:"absolute z-100 right-[10px] top-[25px] border bg-[#1e293b] rounded p-2 w-[200px]"},ue=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),he=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),xe=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),pe=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),ve=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),_e=[ue,he,xe,pe,ve],me={class:"flex justify-center"},fe={key:0,class:"flex text-white w-[100%]"},we={class:"w-full"},ge={class:"flex items-center"},be=o(()=>e("div",{class:"w-[100px] h-[100px] relative rounded-full bg-red-500"},[e("img",{class:"w-[100px] h-[100px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"}),e("span",{class:"w-[20px] border bg-green-500 h-[20px] right-[6px] bottom-[6px] absolute rounded-full"})],-1)),ye={class:"w-[75%] pl-10"},ke={class:"text-2xl"},Ce=o(()=>e("span",{class:"text-sm"},"4520 messages",-1)),Me=o(()=>e("div",{class:"flex justify-center wrap"},[e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"})],-1)),je={class:"flex justify-center"},$e={key:0,class:"mt-10 flex"},Be=o(()=>e("div",{class:"min-w-[50px]"},[e("img",{class:"w-[50px] h-[50px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"})],-1)),ze={class:"mx-5"},Ae={class:"relative max-w-[50%] min-w-[100px] py-5 px-5 border rounded-tr-[20px] rounded-bl-[20px] min-h-[50px]"},He=["src"],De=o(()=>e("span",{class:"text-sm ml-5 text-white mt-3"},"20:45",-1)),Ie={key:1,class:"mt-10"},Ve={class:"mx-5 justify-end flex"},Ee={class:"relative z-40 bg-red-400 max-w-[50%] py-5 px-5 rounded-tl-[20px] rounded-br-[20px] min-h-[50px]"},Fe={key:0,class:"justify-end flex"},Se=["src"],We=o(()=>e("span",{class:"justify-end mt-3 flex text-sm mr-5 text-white"},"20:45",-1)),Ze={key:0,class:"flex w-full mt-2 h-20 bg-[#1e293b] text-black z-50 border-none rounded-t-2xl"},Ne={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},qe={class:"border rounded border-black w-[50px] h-[50px]"},Oe=["src"],Re={class:"flex justify-end items-center mt-2"},Te={class:"flex items-center w-[20%]"},Ue={class:"ml-1"},Ye={class:"ml-5"},Ge={class:"w-[75%] ml-5 flex items-center"},Je={class:"text-black w-full rounded-2xl"},Le={class:"relative w-full"},Pe={key:0,class:"absolute right-2 bottom-[50px] z-[9999]"},Xe={__name:"Chat",props:{conversations:{type:Array}},setup(h){const g=i(!1),A=new O(R);i("");const H=n=>{p.value+=n.native},M=i(null),x=i(null),D=async n=>{const t=n.target.files[0];if(t){const s=new FileReader;s.onload=async()=>{x.value=await s.result},s.readAsDataURL(t)}},b=i([]),p=i(""),v=i(null),f=i(!1),w=i(null),I=async n=>{const t=await window.axios.get("/admin/getMessage/"+n.id);v.value=n,b.value=t.data.messages,f.value=!1,j()},V=async()=>{const n={message:p.value,conversation_id:v.value.id,file:x.value},t=await window.axios.post("/admin/sendMessage",n);b.value.push(t.data.message),v.value.last_message=t.data.message,p.value=await"",await j()},j=()=>{w.value&&(w.value.scrollTop=w.value.scrollHeight)},y=i(!1),k=i(!1);return(n,t)=>(l(),F(q,null,{default:_(()=>[e("div",Y,[e("button",{class:"px-5 border hover:bg-red-400",onClick:t[0]||(t[0]=s=>f.value=!0)},"Conversation")]),r(z,{classes:"text-white w-[75%]",isOpen:f.value},{content:_(()=>[e("div",G,[e("div",J,[L,(l(!0),a(B,null,$(h.conversations,(s,C)=>(l(),a("div",{key:C,class:"relative bg-[#1a1a1a] hover:bg-[#1e293b] transition-colors duration-300"},[e("div",{onClick:E=>I(s),ss:"flex"},[e("div",X,[Q,e("div",K,[e("p",ee,m(s.user.name),1),e("div",te,[se,e("p",oe,m(s.last_message.message),1)])])])],8,P),le,e("div",ae,[(l(),a("svg",{class:"relative z-100",onClick:t[1]||(t[1]=E=>y.value=!y.value),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},de)),y.value===!0?(l(),a("div",ce,_e)):c("",!0)])]))),128))])])]),footer:_(()=>[e("div",me,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:t[2]||(t[2]=s=>f.value=!1)},"fermer")])]),_:1},8,["isOpen"]),v.value?(l(),a("div",fe,[e("div",we,[e("div",ge,[be,e("div",ye,[e("h1",ke,m(v.value.user.name),1),Ce]),e("div",{onClick:t[5]||(t[5]=s=>k.value=!0),class:"relative"},[r(d(u),{onClick:t[3]||(t[3]=()=>{}),class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:gallery-bold"}),r(z,{classes:"text-white w-[50%]",isOpen:k.value},{content:_(()=>[Me]),footer:_(()=>[e("div",je,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:t[4]||(t[4]=s=>k.value=!1)},"fermer")])]),_:1},8,["isOpen"])])]),e("div",{ref_key:"chatContainer",ref:w,class:"chat-container"},[(l(!0),a(B,null,$(b.value,(s,C)=>(l(),a("div",{key:C},[n.$attrs.auth.user.id!==s.user_id?(l(),a("div",$e,[Be,e("div",ze,[e("div",Ae,m(s.message),1),s.mediable&&s.mediable.length>0?(l(),a("img",{key:0,class:"w-[25%] h-auto border rounded mt-3",src:`/storage/data/image/${s.mediable[0].name}`},null,8,He)):c("",!0),De])])):(l(),a("div",Ie,[e("div",Ve,[e("div",Ee,m(s.message),1)]),s.mediable&&s.mediable.length>0?(l(),a("div",Fe,[e("img",{class:"w-[25%] h-auto border border-red-400 rounded mt-3 mr-5",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Se)])):c("",!0),We]))]))),128))],512),x.value?(l(),a("div",Ze,[e("div",Ne,[e("div",qe,[e("img",{class:"w-[50px] h-[50px]",src:x.value,alt:"",srcset:""},null,8,Oe)]),r(d(u),{onClick:t[6]||(t[6]=s=>x.value=null),class:"cursor-pointer absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})])])):c("",!0),e("div",Re,[e("div",Te,[e("div",Ue,[r(d(u),{onClick:t[7]||(t[7]=s=>{M.value.click()}),class:"cursor-pointer w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"gravity-ui:picture"}),e("input",{type:"file",ref_key:"fileInput",ref:M,onChange:D,class:"hidden"},null,544)]),e("div",Ye,[r(d(u),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:file-bold"})])]),e("div",Ge,[e("div",Je,[e("div",Le,[g.value?(l(),a("span",Pe,[r(d(T),{data:d(A),set:"twitter",onSelect:H},null,8,["data"])])):c("",!0),S(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>p.value=s),class:"border-none text-black w-full rounded-2xl pr-10 pl-4 py-2",type:"text"},null,512),[[W,p.value]]),r(d(u),{onClick:t[9]||(t[9]=s=>g.value=!g.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 text-[#1e293b]",icon:"fluent:emoji-smile-slight-24-filled"})])]),e("div",{onClick:V,class:"cursor-pointer w-10 h-10"},[r(d(u),{class:"w-10 h-10 text-[#1e293b] ml-1",icon:"fluent:send-48-filled"})])])])])])):c("",!0)]),_:1}))}},at=U(Xe,[["__scopeId","data-v-76086aac"]]);export{at as default};
