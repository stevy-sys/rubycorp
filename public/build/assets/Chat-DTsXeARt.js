import{g as n,o as l,c as N,w as m,a as e,b as r,f as i,j as B,t as _,h as u,F as z,u as d,e as q,l as O,p as R,m as T}from"./app-mzutPM1G.js";import{_ as H}from"./ModalLayout-F9Gi2pmT.js";import{_ as U}from"./AdminLayout-DgQgNN4c.js";import{E as Y,d as G,P as J}from"./Picker-Cuk7oqfe.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as h}from"./iconify-V65GgP_E.js";import"./ResponsiveNavLink-DzkTfNm9.js";const o=c=>(R("data-v-bc5f22a1"),c=c(),T(),c),P={class:"flex justify-end mb-5"},X={class:"text-white flex justify-center"},Q={class:"w-[50%] border border-white h-auto rounded-xl p-2"},K=o(()=>e("div",{class:"relative mb-10"},[e("input",{class:"w-full text-black rounded-xl p-2 pr-12 border border-red-300 focus:border-red-500 focus:outline-none",type:"text",placeholder:"Recherche"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-search absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),ee=["onClick"],te={class:"flex items-center p-2"},se=o(()=>e("div",{class:"w-20 h-20 rounded-full overflow-hidden border border-white"},[e("img",{class:"w-full h-full object-cover",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdyhj65-Cz6UvgVh8YUCAQM_ElfcG0gJJ7NA&s",alt:""})],-1)),oe={class:"ml-5"},le={class:"font-semibold text-[25px]"},ie={class:"flex items-center"},ae=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",fill:"#f87171"}),e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",stroke:"#f87171","stroke-width":"1.5"}),e("path",{d:"M12 15l4-4-4-4",stroke:"#f87171","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ne={class:"font-sans text-[12px] ml-1"},re=o(()=>e("svg",{class:"mr-1 absolute left-[70px] bottom-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"green"},[e("circle",{cx:"8",cy:"8",r:"8"})],-1)),de={class:"absolute z-100 right-4 top-1/2 transform -translate-y-1/2"},ce=o(()=>e("circle",{cx:"12",cy:"6",r:"2",fill:"#333"},null,-1)),ue=o(()=>e("circle",{cx:"12",cy:"12",r:"2",fill:"#333"},null,-1)),he=o(()=>e("circle",{cx:"12",cy:"18",r:"2",fill:"#333"},null,-1)),xe=[ce,ue,he],pe={key:0,class:"absolute z-100 right-[10px] top-[25px] border bg-[#1e293b] rounded p-2 w-[200px]"},ve=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),me=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),_e=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),fe=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),we=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),ge=[ve,me,_e,fe,we],be={class:"flex justify-center"},ye={key:0,class:"flex text-white w-[100%]"},ke={class:"w-full"},Ce={class:"flex items-center"},Me=o(()=>e("div",{class:"w-[100px] h-[100px] relative rounded-full bg-red-500"},[e("img",{class:"w-[100px] h-[100px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"}),e("span",{class:"w-[20px] border bg-green-500 h-[20px] right-[6px] bottom-[6px] absolute rounded-full"})],-1)),je={class:"w-[75%] pl-10"},Ae={class:"text-2xl"},$e=o(()=>e("span",{class:"text-sm"},"4520 messages",-1)),Be=o(()=>e("div",{class:"flex justify-center wrap"},[e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"})],-1)),ze={class:"flex justify-center"},He={key:0,class:"mt-10 flex"},De=o(()=>e("div",{class:"min-w-[50px]"},[e("img",{class:"w-[50px] h-[50px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"})],-1)),Ie={class:"mx-5"},Ve={class:"relative max-w-[50%] min-w-[100px] py-5 px-5 border rounded-tr-[20px] rounded-bl-[20px] min-h-[50px]"},Ee=["src"],Fe=o(()=>e("span",{class:"text-sm ml-5 text-white mt-3"}," 20:45",-1)),Se={key:1,class:"mt-10"},We={class:"mx-5 justify-end flex"},Ze={class:"relative z-40 bg-red-400 max-w-[50%] py-5 px-5 rounded-tl-[20px] rounded-br-[20px] min-h-[50px]"},Ne={key:0,class:"justify-end flex"},qe=["src"],Oe=o(()=>e("span",{class:"justify-end mt-3 flex text-sm mr-5 text-white"},"20:45",-1)),Re={key:0,class:"flex w-full mt-2 h-20 bg-[#1e293b] text-black z-50 border-none rounded-t-2xl"},Te={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Ue={class:"border rounded border-black w-[50px] h-[50px]"},Ye=["src"],Ge={class:"flex justify-end items-center mt-2"},Je={class:"flex items-center w-[20%]"},Le={class:"ml-1"},Pe={class:"ml-5"},Xe={class:"w-[75%] ml-5 flex items-center"},Qe={class:"text-black w-full rounded-2xl"},Ke={class:"relative w-full"},et={key:0,class:"absolute right-2 bottom-[50px] z-[9999]"},tt={__name:"Chat",props:{conversations:{type:Array},idAdmin:{type:Array}},setup(c){const D=c,g=n(!1),I=new Y(G);n("");const V=a=>{p.value+=a.native},M=n(null),x=n(null),E=async a=>{const s=a.target.files[0];if(s){const t=new FileReader;t.onload=async()=>{x.value=await t.result},t.readAsDataURL(s)}},b=n([]),p=n(""),v=n(null),f=n(!1),w=n(null),F=async a=>{const s=await window.axios.get("/admin/getMessage/"+a.id);v.value=a,b.value=s.data.messages,f.value=!1,j()},S=async()=>{const a={message:p.value,conversation_id:v.value.id,file:x.value},s=await window.axios.post("/admin/sendMessage",a);b.value.push(s.data.message),v.value.last_message=s.data.message,p.value=await"",await j()},j=()=>{w.value&&(w.value.scrollTop=w.value.scrollHeight)},y=n(!1),k=n(!1),W=a=>D.idAdmin.filter(t=>t.id==a).length>0;return(a,s)=>(l(),N(U,null,{default:m(()=>[e("div",P,[e("button",{class:"px-5 border hover:bg-red-400",onClick:s[0]||(s[0]=t=>f.value=!0)},"Conversation")]),r(H,{classes:"text-white w-auto lg:w-[50%]",isOpen:f.value},{content:m(()=>[e("div",X,[e("div",Q,[K,(l(!0),i(z,null,B(c.conversations,(t,C)=>{var A,$;return l(),i("div",{key:C,class:"relative bg-[#1a1a1a] hover:bg-[#1e293b] transition-colors duration-300"},[e("div",{onClick:Z=>F(t),ss:"flex"},[e("div",te,[se,e("div",oe,[e("p",le,_((A=t==null?void 0:t.user)==null?void 0:A.name),1),e("div",ie,[ae,e("p",ne,_(($=t==null?void 0:t.last_message)==null?void 0:$.message),1)])])])],8,ee),re,e("div",de,[(l(),i("svg",{class:"relative z-100",onClick:s[1]||(s[1]=Z=>y.value=!y.value),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},xe)),y.value===!0?(l(),i("div",pe,ge)):u("",!0)])])}),128))])])]),footer:m(()=>[e("div",be,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:s[2]||(s[2]=t=>f.value=!1)},"fermer")])]),_:1},8,["isOpen"]),v.value?(l(),i("div",ye,[e("div",ke,[e("div",Ce,[Me,e("div",je,[e("h1",Ae,_(v.value.user.name),1),$e]),e("div",{onClick:s[5]||(s[5]=t=>k.value=!0),class:"relative"},[r(d(h),{onClick:s[3]||(s[3]=()=>{}),class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:gallery-bold"}),r(H,{classes:"text-white w-full lg:w-[50%]",isOpen:k.value},{content:m(()=>[Be]),footer:m(()=>[e("div",ze,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:s[4]||(s[4]=t=>k.value=!1)},"fermer")])]),_:1},8,["isOpen"])])]),e("div",{ref_key:"chatContainer",ref:w,class:"chat-container"},[(l(!0),i(z,null,B(b.value,(t,C)=>(l(),i("div",{key:C},[W(t.user_id)?(l(),i("div",Se,[e("div",We,[e("div",Ze,_(t.message),1)]),t.mediable&&t.mediable.length>0?(l(),i("div",Ne,[e("img",{class:"w-[25%] h-auto border border-red-400 rounded mt-3 mr-5",src:`/storage/data/image/${t.mediable[0].name}`},null,8,qe)])):u("",!0),Oe])):(l(),i("div",He,[De,e("div",Ie,[e("div",Ve,_(t.message),1),t.mediable&&t.mediable.length>0?(l(),i("img",{key:0,class:"w-[25%] h-auto border rounded mt-3",src:`/storage/data/image/${t.mediable[0].name}`},null,8,Ee)):u("",!0),Fe])]))]))),128))],512),x.value?(l(),i("div",Re,[e("div",Te,[e("div",Ue,[e("img",{class:"w-[50px] h-[50px]",src:x.value,alt:"",srcset:""},null,8,Ye)]),r(d(h),{onClick:s[6]||(s[6]=t=>x.value=null),class:"cursor-pointer absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})])])):u("",!0),e("div",Ge,[e("div",Je,[e("div",Le,[r(d(h),{onClick:s[7]||(s[7]=t=>{M.value.click()}),class:"cursor-pointer w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"gravity-ui:picture"}),e("input",{type:"file",ref_key:"fileInput",ref:M,onChange:E,class:"hidden"},null,544)]),e("div",Pe,[r(d(h),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:file-bold"})])]),e("div",Xe,[e("div",Qe,[e("div",Ke,[g.value?(l(),i("span",et,[r(d(J),{data:d(I),set:"twitter",onSelect:V},null,8,["data"])])):u("",!0),q(e("input",{"onUpdate:modelValue":s[8]||(s[8]=t=>p.value=t),class:"border-none text-black w-full rounded-2xl pr-10 pl-4 py-2",type:"text"},null,512),[[O,p.value]]),r(d(h),{onClick:s[9]||(s[9]=t=>g.value=!g.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 text-[#1e293b]",icon:"fluent:emoji-smile-slight-24-filled"})])]),e("div",{onClick:S,class:"cursor-pointer w-10 h-10"},[r(d(h),{class:"w-10 h-10 text-[#1e293b] ml-1",icon:"fluent:send-48-filled"})])])])])])):u("",!0)]),_:1}))}},dt=L(tt,[["__scopeId","data-v-bc5f22a1"]]);export{dt as default};
