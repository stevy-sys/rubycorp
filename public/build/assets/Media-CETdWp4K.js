import{_ as x}from"./AppLayout-Dv1rpoJ7.js";import{o as m,f,b as y,w as E,F as v,a as e,j,i as h}from"./app-CwhIxXtX.js";import"./ResponsiveNavLink-CJ6slUFH.js";var b="https://js.stripe.com/v3",L=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,w="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",P=function(){for(var r=document.querySelectorAll('script[src^="'.concat(b,'"]')),n=0;n<r.length;n++){var o=r[n];if(L.test(o.src))return o}return null},_=function(r){var n="",o=document.createElement("script");o.src="".concat(b).concat(n);var t=document.head||document.body;if(!t)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return t.appendChild(o),o},k=function(r,n){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:n})},a=null,c=null,u=null,C=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},I=function(r,n){return function(){window.Stripe?r(window.Stripe):n(new Error("Stripe.js not available"))}},R=function(r){return a!==null?a:(a=new Promise(function(n,o){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&r&&console.warn(w),window.Stripe){n(window.Stripe);return}try{var t=P();if(t&&r)console.warn(w);else if(!t)t=_(r);else if(t&&u!==null&&c!==null){var i;t.removeEventListener("load",u),t.removeEventListener("error",c),(i=t.parentNode)===null||i===void 0||i.removeChild(t),t=_(r)}u=I(n,o),c=C(o),t.addEventListener("load",u),t.addEventListener("error",c)}catch(d){o(d);return}}),a.catch(function(n){return a=null,Promise.reject(n)}))},T=function(r,n,o){if(r===null)return null;var t=r.apply(void 0,n);return k(t,o),t},l,g=!1,S=function(){return l||(l=R(null).catch(function(r){return l=null,Promise.reject(r)}),l)};Promise.resolve().then(function(){return S()}).catch(function(s){g||console.warn(s)});var D=function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];g=!0;var t=Date.now();return S().then(function(i){return T(i,n,t)})};const V={class:"text-white"},B={class:"lg:flex justify-between"},F=e("div",{class:"lg:w-[55%]"},[e("div",{class:"w-full bg-red-500 h-[500px] rounded-lg"}),e("div",{class:"p-5 border mt-10"},[e("div",{class:"mt-5 font-bold text-xl"},"Descriptions"),e("div",{class:"w-full mt-3"}," Lorem ipsum, dolor sit amet consectetur adipisicing elit. Officia fugit sed ullam nulla odit. Sequi eum praesentium inventore illum commodi? ")])],-1),G={class:"lg:w-[40%] mt-5 lg:mt-0"},W=e("div",{class:"border mb-5 p-5 h-auto rounded bg-grey-500"},[e("div",{class:"mb-2 font-bold text-xl"},"Details"),e("div",{class:"my-5"},[e("span",null,"24 vu")]),e("div",{class:"my-5"},[e("span",null,"24 acheter")]),e("div",{class:"my-5"},[e("span",null,"upload : 24 juillet")]),e("div",{class:"my-5"},[h("Partager sur : "),e("span",{class:"mx-5"},"facebook"),h(),e("span",{class:"mx-5"},"twitter")])],-1),N={class:"border my-5 p-5 h-auto rounded bg-grey-500"},q=e("div",{class:"mb-2 font-bold text-xl"},"Intéressé ?",-1),A=e("div",{class:"flex justify-start items-center"},[e("div",null,"24€")],-1),M={class:"mt-5 text-white",id:"payment-form"},X={class:"mb-2",ref:"cardElement",id:"card-element"},O=e("p",{id:"error-message"},null,-1),U={class:"border my-5 p-5 h-auto rounded bg-grey-500"},z=e("div",{class:"mb-2 font-bold text-xl"},"Produits relatifs",-1),K={class:"flex justify-around flex-wrap"},Q=e("div",{class:"mx-auto mt-[100px]"},null,-1),H={__name:"Media",props:{product:Object},setup(s){const r=s,n=async o=>{o.preventDefault();try{const t=await window.axios.get(`/create-checkout-session?product_id=${r.product.id}`);console.log("response",t);const i=t.data.id,d=await D("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!d){console.error("Échec du chargement de Stripe.");return}const{error:p}=await d.redirectToCheckout({sessionId:i});p&&console.error("Erreur lors de la redirection vers Stripe Checkout",p)}catch(t){console.error("Erreur lors de la création de la session de paiement",t)}};return(o,t)=>(m(),f(v,null,[y(x,{showSidebar:!1,title:"Dashboard"},{default:E(()=>[e("div",V,[e("div",B,[F,e("div",G,[W,e("div",N,[q,A,e("form",M,[e("div",X,null,512),e("button",{onClick:n,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer"),O])]),e("div",U,[z,e("div",K,[(m(),f(v,null,j(10,i=>e("div",{key:i,class:"bg-red-500 rounded-lg border my-1 w-[70px] h-[70px]"})),64))])])])])])]),_:1}),Q],64))}};export{H as default};
