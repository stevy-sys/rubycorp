import{g as r,o as l,c as E,w as y,a as e,b as i,f as a,j as B,t as _,h,F as A,u as n,e as F,l as W,p as Z,m as q}from"./app-CAhNJg-g.js";import{_ as N}from"./ModalLayout-CMhbF8Ot.js";import{_ as R}from"./AdminLayout-B0GRKAVH.js";import{E as T,d as U,P as Y}from"./Picker-l0QV_7rP.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as c}from"./iconify-DrmEc_uq.js";import"./ResponsiveNavLink-BC1ww8h2.js";const t=u=>(Z("data-v-7216059c"),u=u(),q(),u),J={class:"flex justify-end mb-5"},L={class:"text-white flex justify-center"},O={class:"w-[50%] border border-white h-auto rounded-xl p-2"},P=t(()=>e("div",{class:"relative mb-10"},[e("input",{class:"w-full text-black rounded-xl p-2 pr-12 border border-red-300 focus:border-red-500 focus:outline-none",type:"text",placeholder:"Recherche"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-search absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),X=["onClick"],Q={class:"flex items-center p-2"},K=t(()=>e("div",{class:"w-20 h-20 rounded-full overflow-hidden border border-white"},[e("img",{class:"w-full h-full object-cover",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdyhj65-Cz6UvgVh8YUCAQM_ElfcG0gJJ7NA&s",alt:""})],-1)),ee={class:"ml-5"},te={class:"font-semibold text-[25px]"},se={class:"flex items-center"},oe=t(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",fill:"#f87171"}),e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",stroke:"#f87171","stroke-width":"1.5"}),e("path",{d:"M12 15l4-4-4-4",stroke:"#f87171","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),le={class:"font-sans text-[12px] ml-1"},ae=t(()=>e("svg",{class:"mr-1 absolute left-[70px] bottom-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"green"},[e("circle",{cx:"8",cy:"8",r:"8"})],-1)),ie={class:"absolute right-4 top-1/2 transform -translate-y-1/2"},ne=t(()=>e("circle",{cx:"12",cy:"6",r:"2",fill:"#333"},null,-1)),re=t(()=>e("circle",{cx:"12",cy:"12",r:"2",fill:"#333"},null,-1)),de=t(()=>e("circle",{cx:"12",cy:"18",r:"2",fill:"#333"},null,-1)),ce=[ne,re,de],he={key:0,class:"absolute right-[10px] top-[25px] border bg-[#1e293b] rounded p-2 w-[200px]"},ue=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),xe=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),pe=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),_e=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),ve=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),me=[ue,xe,pe,_e,ve],we={class:"flex justify-center"},fe={key:0,class:"flex text-white w-[100%]"},be={class:"w-full"},ge={class:"flex items-center"},ke=t(()=>e("div",{class:"w-[100px] h-[100px] relative rounded-full bg-red-500"},[e("img",{class:"w-[100px] h-[100px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"}),e("span",{class:"w-[20px] border bg-green-500 h-[20px] right-[6px] bottom-[6px] absolute rounded-full"})],-1)),ye={class:"w-[75%] pl-10"},Me={class:"text-2xl"},Ce=t(()=>e("span",{class:"text-sm"},"4520 messages",-1)),je={key:0,class:"border bg-[#1e293b] rounded p-2 w-[200px] absolute right-[18px] top-[35px]"},Be=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),Ae=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),Ve=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir contenue multimedia",-1)),He=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),$e=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),De=t(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),Ie=[Be,Ae,Ve,He,$e,De],Se={key:0,class:"mt-10 flex"},ze=t(()=>e("div",{class:"min-w-[50px]"},[e("img",{class:"w-[50px] h-[50px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"})],-1)),Ee={class:"mx-5"},Fe={class:"relative max-w-[50%] min-w-[100px] py-5 px-5 border rounded-tr-[20px] rounded-bl-[20px] min-h-[50px]"},We=["src"],Ze=t(()=>e("span",{class:"text-sm ml-5 text-white mt-3"},"20:45",-1)),qe={key:1,class:"mt-10"},Ne={class:"mx-5 justify-end flex"},Re={class:"relative bg-red-400 max-w-[50%] py-5 px-5 rounded-tl-[20px] rounded-br-[20px] min-h-[50px]"},Te={key:0,class:"justify-end flex"},Ue=["src"],Ye=t(()=>e("span",{class:"justify-end mt-3 flex text-sm mr-5 text-white"},"20:45",-1)),Ge={class:"flex w-full mt-2 h-20 bg-[#1e293b] text-black z-50 border-none rounded-t-2xl"},Je={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Le=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Oe={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Pe=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Xe={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Qe=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),Ke={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},et=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),tt={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},st=t(()=>e("div",{class:"border rounded border-black w-[50px] h-[50px]"},null,-1)),ot={class:"flex justify-end items-center mt-2"},lt={class:"flex items-center w-[20%]"},at={class:"ml-1"},it={class:"ml-5"},nt={class:"w-[75%] ml-5 flex items-center"},rt={class:"text-black w-full rounded-2xl"},dt={class:"relative w-full"},ct={key:0,class:"absolute right-2 bottom-[50px] z-[9999]"},ht={__name:"Chat",props:{conversations:{type:Array}},setup(u){const w=r(!1),V=new T(U);r("");const H=d=>{x.value+=d.native},M=r(null),C=r(null),$=async d=>{const o=d.target.files[0];if(o){const s=new FileReader;s.onload=async()=>{C.value=await s.result},s.readAsDataURL(o)}},f=r([]),x=r(""),p=r(null),v=r(!1),m=r(null),D=async d=>{const o=await window.axios.get("/admin/getMessage/"+d.id);p.value=d,f.value=o.data.messages,v.value=!1,j()},I=async()=>{const d={message:x.value,conversation_id:p.value.id,file:C.value},o=await window.axios.post("/admin/sendMessage",d);f.value.push(o.data.message),p.value.last_message=o.data.message,x.value=await"",await j()},j=()=>{m.value&&(m.value.scrollTop=m.value.scrollHeight)},b=r(!1),g=r(!1),S=()=>{g.value=!g.value};return(d,o)=>(l(),E(R,null,{default:y(()=>[e("div",J,[e("button",{class:"px-5 border hover:bg-red-400",onClick:o[0]||(o[0]=s=>v.value=!0)},"Conversation")]),i(N,{classes:"text-white w-[75%]",isOpen:v.value},{content:y(()=>[e("div",L,[e("div",O,[P,(l(!0),a(A,null,B(u.conversations,(s,k)=>(l(),a("div",{key:k,class:"relative bg-[#1a1a1a] hover:bg-[#1e293b] transition-colors duration-300"},[e("div",{onClick:z=>D(s),ss:"flex"},[e("div",Q,[K,e("div",ee,[e("p",te,_(s.user.name),1),e("div",se,[oe,e("p",le,_(s.last_message.message),1)])])])],8,X),ae,e("div",ie,[(l(),a("svg",{class:"relative",onClick:o[1]||(o[1]=z=>b.value=!b.value),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},ce)),b.value===!0?(l(),a("div",he,me)):h("",!0)])]))),128))])])]),footer:y(()=>[e("div",we,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:o[2]||(o[2]=s=>v.value=!1)},"fermer")])]),_:1},8,["isOpen"]),p.value?(l(),a("div",fe,[e("div",be,[e("div",ge,[ke,e("div",ye,[e("h1",Me,_(p.value.user.name),1),Ce]),e("div",{onClick:S,class:"relative"},[i(n(c),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"ant-design:more-outlined"}),g.value===!0?(l(),a("div",je,Ie)):h("",!0)])]),e("div",{ref_key:"chatContainer",ref:m,class:"chat-container"},[(l(!0),a(A,null,B(f.value,(s,k)=>(l(),a("div",{key:k},[d.$attrs.auth.user.id!==s.user_id?(l(),a("div",Se,[ze,e("div",Ee,[e("div",Fe,_(s.message),1),s.mediable&&s.mediable.length>0?(l(),a("img",{key:0,class:"w-[25%] h-auto border rounded mt-3",src:`/storage/data/image/${s.mediable[0].name}`},null,8,We)):h("",!0),Ze])])):(l(),a("div",qe,[e("div",Ne,[e("div",Re,_(s.message),1)]),s.mediable&&s.mediable.length>0?(l(),a("div",Te,[e("img",{class:"w-[25%] h-auto border border-red-400 rounded mt-3 mr-5",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Ue)])):h("",!0),Ye]))]))),128))],512),e("div",Ge,[e("div",Je,[Le,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Oe,[Pe,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Xe,[Qe,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",Ke,[et,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})]),e("div",tt,[st,i(n(c),{class:"absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})])]),e("div",ot,[e("div",lt,[e("div",at,[i(n(c),{onClick:o[3]||(o[3]=s=>{M.value.click()}),class:"cursor-pointer w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"gravity-ui:picture"}),e("input",{type:"file",ref_key:"fileInput",ref:M,onChange:$,class:"hidden"},null,544)]),e("div",it,[i(n(c),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:file-bold"})])]),e("div",nt,[e("div",rt,[e("div",dt,[w.value?(l(),a("span",ct,[i(n(Y),{data:n(V),set:"twitter",onSelect:H},null,8,["data"])])):h("",!0),F(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>x.value=s),class:"border-none text-black w-full rounded-2xl pr-10 pl-4 py-2",type:"text"},null,512),[[W,x.value]]),i(n(c),{onClick:o[5]||(o[5]=s=>w.value=!w.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 text-[#1e293b]",icon:"fluent:emoji-smile-slight-24-filled"})])]),e("div",{onClick:I,class:"w-10 h-10"},[i(n(c),{class:"w-10 h-10 text-[#1e293b] ml-1",icon:"fluent:send-48-filled"})])])])])])):h("",!0)]),_:1}))}},ft=G(ht,[["__scopeId","data-v-7216059c"]]);export{ft as default};
