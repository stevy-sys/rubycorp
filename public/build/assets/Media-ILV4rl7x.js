import{_ as I}from"./AppLayout-BOcZWjik.js";import{I as m}from"./iconify-BIVtkYf1.js";import{Q as T,o as n,f as a,b as u,w as k,F as S,a as e,n as b,u as l,h as f,i as y,t as p,j as C,y as R}from"./app-BbQOwD56.js";import"./ResponsiveNavLink-aKsyRzuz.js";var E="https://js.stripe.com/v3",V=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,j="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",D=function(){for(var r=document.querySelectorAll('script[src^="'.concat(E,'"]')),s=0;s<r.length;s++){var i=r[s];if(V.test(i.src))return i}return null},z=function(r){var s="",i=document.createElement("script");i.src="".concat(E).concat(s);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},B=function(r,s){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:s})},h=null,_=null,x=null,F=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},G=function(r,s){return function(){window.Stripe?r(window.Stripe):s(new Error("Stripe.js not available"))}},N=function(r){return h!==null?h:(h=new Promise(function(s,i){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe&&r&&console.warn(j),window.Stripe){s(window.Stripe);return}try{var o=D();if(o&&r)console.warn(j);else if(!o)o=z(r);else if(o&&x!==null&&_!==null){var d;o.removeEventListener("load",x),o.removeEventListener("error",_),(d=o.parentNode)===null||d===void 0||d.removeChild(o),o=z(r)}x=G(s,i),_=F(i),o.addEventListener("load",x),o.addEventListener("error",_)}catch(c){i(c);return}}),h.catch(function(s){return h=null,Promise.reject(s)}))},W=function(r,s,i){if(r===null)return null;var o=r.apply(void 0,s);return B(o,i),o},v,P=!1,L=function(){return v||(v=N(null).catch(function(r){return v=null,Promise.reject(r)}),v)};Promise.resolve().then(function(){return L()}).catch(function(t){P||console.warn(t)});var $=function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];P=!0;var o=Date.now();return L().then(function(d){return W(d,s,o)})};const A={class:"text-white"},M={class:"lg:flex justify-between"},X={class:"lg:w-[55%]"},q={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},Q={key:0,class:"block w-full h-full relative"},U=["src"],Y={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},K={key:1,class:"block w-full h-full relative"},O=["src"],Z={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},J={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},H={class:"flex justify-between items-center border-t-2 border-b-2 mt-2 h-10"},ee=e("div",{class:"flex items-baseline"},[e("p",{class:"hover:text-[#1e293b] leading-3 text-md underline ml-2 transition duration-300"}," J'adore"),e("span",{class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},"(22789)")],-1),te=e("div",{class:"flex items-baseline"},[e("p",{class:"hover:text-[#1e293b] leading-3 text-md underline transition duration-300"}," Commenter"),e("span",{class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},"(155)")],-1),se=e("span",null,null,-1),re={class:"p-5 border mt-10"},oe={class:"mt-5 font-bold text-xl"},ie={class:"w-full mt-3"},ne={class:"lg:w-[40%] mt-5 lg:mt-0"},ae={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},le=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),ce={class:"my-5"},de={class:"my-5"},ue={class:"flex"},fe={class:"border my-5 p-5 h-auto rounded bg-grey-500"},me={key:0,class:"mb-2 font-bold text-xl"},pe={class:"flex justify-start items-center"},he={key:0},ve={key:1},ge={key:1,class:"mt-5 text-white",id:"payment-form"},be={class:"mb-2",ref:"cardElement",id:"card-element"},_e=e("p",{id:"error-message"},null,-1),xe={class:"border my-5 p-5 rounded bg-grey-500"},ye={class:"mb-2 font-bold text-xl"},we={class:"flex justify-around flex-wrap p-5"},ke={key:0,class:"block w-full h-full"},Se=["src"],je={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ze={key:1,class:"block w-full h-full"},Ee=["src"],Pe={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Le={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Ie=e("div",{class:"mx-auto mt-[100px]"},null,-1),De={__name:"Media",props:{product:Object,relatif:Array},setup(t){const r=t,s=T();console.log(s.props.translations.message);const i=async o=>{o.preventDefault();try{const d=await window.axios.get(`/create-checkout-session?product_id=${r.product.id}`);console.log("response",d);const c=d.data.id,g=await $("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!g){console.error("Échec du chargement de Stripe.");return}const{error:w}=await g.redirectToCheckout({sessionId:c});w&&console.error("Erreur lors de la redirection vers Stripe Checkout",w)}catch(d){console.error("Erreur lors de la création de la session de paiement",d)}};return(o,d)=>(n(),a(S,null,[u(I,{showSidebar:!1,title:"Dashboard"},{default:k(()=>[e("div",A,[e("div",M,[e("div",X,[e("div",q,[t.product.extentionType=="image"?(n(),a("span",Q,[e("img",{class:b([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${t.product.name}`,alt:"Product Image"},null,10,U),t.product.is_free==!1?(n(),a("div",Y,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0)])):f("",!0),t.product.extentionType=="video"?(n(),a("span",K,[e("video",{class:b([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${t.product.name}`,type:"video/mp4"},null,8,O),y(" Your browser does not support the video tag. ")],2),t.product.is_free==!1?(n(),a("div",Z,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0),e("div",J,[u(l(m),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):f("",!0)]),e("div",H,[ee,te,e("div",null,[u(l(m),{icon:"material-symbols:share",class:"text-white hover:text-[#1e293b] transition duration-300",style:{"font-size":"30px","margin-right":"5px"},size:"2em"}),se])]),e("div",re,[e("div",oe,p(l(s).props.translations.message.description),1),e("div",ie,p(t.product.description),1)])]),e("div",ne,[e("div",ae,[le,e("div",ce,[e("span",null,p(l(s).props.translations.message.upload)+" : "+p(t.product.created_at),1)]),e("div",de,[y(p(l(s).props.translations.message.partage)+" ",1),e("div",ue,[u(l(m),{class:"cursor-pointer hover:text-red-400",icon:"la:facebook-f",style:{"font-size":"30px","margin-left":"5px"},size:"2em"}),u(l(m),{class:"cursor-pointer hover:text-red-400",icon:"mdi:twitter",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})])])]),e("div",fe,[t.product.is_free==!1?(n(),a("div",me,"Intéressé ?")):f("",!0),e("div",pe,[t.product.is_free==!0?(n(),a("div",he,p(l(s).props.translations.message.gratuit),1)):(n(),a("div",ve,p(t.product.price/100)+" €",1))]),t.product.is_free==!1?(n(),a("form",ge,[e("div",be,null,512),e("button",{onClick:i,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer"),_e])):f("",!0)]),e("div",xe,[e("div",ye,p(l(s).props.translations.message.relatif),1),e("div",we,[(n(!0),a(S,null,C(t.relatif,(c,g)=>(n(),a("div",{key:g,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[u(l(R),{href:o.route("media",{product_id:c.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:k(()=>[c.extentionType=="image"?(n(),a("span",ke,[e("img",{class:b([c.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${c.name}`,alt:"Product Image"},null,10,Se),c.is_free==!1?(n(),a("div",je,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0)])):f("",!0),c.extentionType=="video"?(n(),a("span",ze,[e("video",{class:b([c.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${c.name}`,type:"video/mp4"},null,8,Ee),y(" Your browser does not support the video tag. ")],2),c.is_free==!1?(n(),a("div",Pe,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0),e("div",Le,[u(l(m),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):f("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),Ie],64))}};export{De as default};
