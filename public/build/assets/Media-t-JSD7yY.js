import{_ as F}from"./AppLayout-Bw0GtzyK.js";import{I as h}from"./iconify-Cn61QZuq.js";import{g as _,o as n,f as a,a as e,t as d,k as G,e as O,l as W,F as E,j as M,i as C,Q as A,b as c,w as y,n as j,u as l,h as g,y as N}from"./app-z4L3ct2k.js";import{_ as P}from"./ModalLayout-CU0s_Xa3.js";import"./ResponsiveNavLink-CnflJbBM.js";var D="https://js.stripe.com/v3",Z=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,T="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",q=function(){for(var t=document.querySelectorAll('script[src^="'.concat(D,'"]')),o=0;o<t.length;o++){var r=t[o];if(Z.test(r.src))return r}return null},I=function(t){var o="",r=document.createElement("script");r.src="".concat(D).concat(o);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(r),r},U=function(t,o){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:o})},w=null,z=null,$=null,X=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},Y=function(t,o){return function(){window.Stripe?t(window.Stripe):o(new Error("Stripe.js not available"))}},Q=function(t){return w!==null?w:(w=new Promise(function(o,r){if(typeof window>"u"||typeof document>"u"){o(null);return}if(window.Stripe&&t&&console.warn(T),window.Stripe){o(window.Stripe);return}try{var i=q();if(i&&t)console.warn(T);else if(!i)i=I(t);else if(i&&$!==null&&z!==null){var f;i.removeEventListener("load",$),i.removeEventListener("error",z),(f=i.parentNode)===null||f===void 0||f.removeChild(i),i=I(t)}$=Y(o,r),z=X(r),i.addEventListener("load",$),i.addEventListener("error",z)}catch(u){r(u);return}}),w.catch(function(o){return w=null,Promise.reject(o)}))},K=function(t,o,r){if(t===null)return null;var i=t.apply(void 0,o);return U(i,r),i},k,V=!1,B=function(){return k||(k=Q(null).catch(function(t){return k=null,Promise.reject(t)}),k)};Promise.resolve().then(function(){return B()}).catch(function(s){V||console.warn(s)});var H=function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];V=!0;var i=Date.now();return B().then(function(f){return K(f,o,i)})};const J={class:"w-full lg:w-[50%] bg-white dark:bg-gray-900 py-8 lg:py-16 antialiased"},ee={class:"w-auto mx-auto px-4"},te={class:"flex justify-between items-center mb-6"},se={class:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white"},oe={class:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700"},re=e("label",{for:"comment",class:"sr-only"},"Your comment",-1),ie=e("button",{type:"submit",class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800"}," Post comment ",-1),ne={class:"p-6 text-base bg-white rounded-lg dark:bg-gray-900"},ae={class:"flex justify-between items-center mb-2"},le={class:"flex items-center"},ce={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold"},de=e("img",{class:"mr-2 w-6 h-6 rounded-full",src:"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:"Michael Gough"},null,-1),ue=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("time",{pubdate:"",datetime:"2022-02-08",title:"February 8th, 2022"})],-1),me=e("button",{id:"dropdownComment1Button","data-dropdown-toggle":"dropdownComment1",class:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button"},[e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3"},[e("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})]),e("span",{class:"sr-only"},"Comment settings")],-1),fe={class:"text-gray-500 dark:text-gray-400"},pe={__name:"CommentsSection",props:{product:Object},setup(s){var f;const t=s,o=_((f=t==null?void 0:t.product)==null?void 0:f.comments),r=_({description:""}),i=async()=>{var x;const u=await window.axios.post("/user/sendComments",{description:r.value.description,product_id:t.product.id});o.value.unshift((x=u==null?void 0:u.data)==null?void 0:x.data),r.value.description=""};return(u,x)=>(n(),a("section",J,[e("div",ee,[e("div",te,[e("h2",se,"Discussion ("+d(o.value.length)+")",1)]),e("form",{onSubmit:G(i,["prevent"]),class:"mb-6"},[e("div",oe,[re,O(e("textarea",{"onUpdate:modelValue":x[0]||(x[0]=b=>r.value.description=b),id:"comment",rows:"6",class:"px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800",placeholder:"Write a comment...",required:""},null,512),[[W,r.value.description]])]),ie],32),(n(!0),a(E,null,M(o.value,b=>(n(),a("article",ne,[e("footer",ae,[e("div",le,[e("p",ce,[de,C(d(b.user.name),1)]),ue]),me]),e("p",fe,d(b.description),1)]))),256))])]))}},he=e("div",{class:"border rounded-lg shadow-lg px-6 py-8 max-w-md mx-auto mt-8"}," vous avez acheter ce produit avec votre token ",-1),ge={class:"flex justify-end"},ve={class:"text-white"},xe={class:"lg:flex justify-between"},be={class:"lg:w-[55%]"},ye={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},_e={key:0,class:"block w-full h-full relative"},we=["src"],ke={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Se={key:1,class:"block w-full h-full relative"},je=["src"],ze={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},$e={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Ce={class:"flex justify-between items-center border-t-2 border-b-2 mt-2 h-10"},Ee={class:"hover:text-[#1e293b] leading-3 text-md underline ml-2 transition duration-300"},Le={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},Pe={class:"hover:text-[#1e293b] mr-2 leading-3 text-md underline transition duration-300"},Te={class:"flex justify-center wrap"},Ie={class:"flex justify-center"},Me={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},De=e("span",null,null,-1),Ve={class:"p-5 border mt-10"},Be={class:"mt-5 font-bold text-xl"},Re={class:"w-full mt-3"},Fe={class:"lg:w-[40%] mt-5 lg:mt-0"},Ge={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},Oe=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),We={class:"my-5"},Ae={class:"my-5"},Ne={class:"flex"},Ze={class:"border my-5 p-5 h-auto rounded bg-grey-500"},qe={key:0,class:"mb-2 font-bold text-xl"},Ue={class:"flex justify-start items-center"},Xe={key:0},Ye={key:1},Qe={key:1,class:"mt-5 text-white",id:"payment-form"},Ke={class:"mb-2",ref:"cardElement",id:"card-element"},He=e("p",{id:"error-message"},null,-1),Je={key:2,class:"mt-5 text-white",id:"payment-form"},et={class:"mb-2",ref:"cardElement",id:"card-element"},tt=e("p",{id:"error-message"},null,-1),st={class:"border my-5 p-5 rounded bg-grey-500"},ot={class:"mb-2 font-bold text-xl"},rt={class:"flex justify-around flex-wrap p-5"},it={key:0,class:"block w-full h-full"},nt=["src"],at={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},lt={key:1,class:"block w-full h-full"},ct=["src"],dt={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ut={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},mt=e("div",{class:"mx-auto mt-[100px]"},null,-1),xt={__name:"Media",props:{product:Object,relatif:Array},setup(s){const t=s,o=_(t.product.likes.length),r=_(t.product.isLike),i=_(!1),f=_(!1),u=A();console.log(u.props.translations.message);const x=async()=>{const v=await window.axios.get(`/user/like?product_id=${t.product.id}`);o.value=v.data.data.likes.length,r.value=v.data.data.isLike},b=async()=>{const v=u.props.auth.user.token;if(t.product.token>v)return alert("pas assez de token");await window.axios.post("/payment/token",{product_id:t.product.id}),f.value=!0},R=async v=>{v.preventDefault();try{const p=await window.axios.get(`/create-checkout-session?product_id=${t.product.id}`);console.log("response",p);const m=p.data.id,S=await H("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!S){console.error("Échec du chargement de Stripe.");return}const{error:L}=await S.redirectToCheckout({sessionId:m});L&&console.error("Erreur lors de la redirection vers Stripe Checkout",L)}catch(p){console.error("Erreur lors de la création de la session de paiement",p)}};return(v,p)=>(n(),a(E,null,[c(F,{showSidebar:!1,title:"Dashboard"},{default:y(()=>[c(P,{classes:"w-auto text-white ",isOpen:f.value},{content:y(()=>[he]),footer:y(()=>[e("div",ge,[e("button",{class:"border px-3 mx-1 flex justify-end",onClick:p[0]||(p[0]=m=>v.window.location.reload())},"fermer")])]),_:1},8,["isOpen"]),e("div",ve,[e("div",xe,[e("div",be,[e("div",ye,[s.product.extentionType=="image"?(n(),a("span",_e,[e("img",{class:j([s.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${s.product.name}`,alt:"Product Image"},null,10,we),s.product.is_free==!1?(n(),a("div",ke,[c(l(h),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0)])):g("",!0),s.product.extentionType=="video"?(n(),a("span",Se,[e("video",{class:j([s.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${s.product.name}`,type:"video/mp4"},null,8,je),C(" Your browser does not support the video tag. ")],2),s.product.is_free==!1?(n(),a("div",ze,[c(l(h),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0),e("div",$e,[c(l(h),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):g("",!0)]),e("div",Ce,[e("div",{onClick:x,class:"flex cursor-pointer items-center"},[e("p",Ee,[c(l(h),{class:"cursor-pointer hover:text-red-400",icon:"flat-color-icons:like",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),e("span",Le,d(r.value==!0?"je n'aime plus":"j'aime")+" ("+d(o.value)+") ",1)]),e("div",{onClick:p[2]||(p[2]=m=>i.value=!0),class:"flex items-center cursor-pointer"},[e("p",Pe,[c(l(h),{class:"cursor-pointer hover:text-red-400",icon:"fa:comments-o",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),c(P,{classes:"text-white w-full",isOpen:i.value},{content:y(()=>[e("div",Te,[c(pe,{product:s.product},null,8,["product"])])]),footer:y(()=>[e("div",Ie,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:p[1]||(p[1]=m=>i.value=!1)},"fermer")])]),_:1},8,["isOpen"]),e("span",Me,"Commentaire ("+d(s.product.comments.length)+")",1)]),e("div",null,[c(l(h),{icon:"material-symbols:share",class:"text-white hover:text-[#1e293b] transition duration-300",style:{"font-size":"30px","margin-right":"5px"},size:"2em"}),De])]),e("div",Ve,[e("div",Be,d(l(u).props.translations.message.description),1),e("div",Re,d(s.product.description),1)])]),e("div",Fe,[e("div",Ge,[Oe,e("div",We,[e("span",null,d(l(u).props.translations.message.upload)+" : "+d(s.product.created_at),1)]),e("div",Ae,[C(d(l(u).props.translations.message.partage)+" ",1),e("div",Ne,[c(l(h),{class:"cursor-pointer hover:text-red-400",icon:"la:facebook-f",style:{"font-size":"30px","margin-left":"5px"},size:"2em"}),c(l(h),{class:"cursor-pointer hover:text-red-400",icon:"mdi:twitter",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})])])]),e("div",Ze,[s.product.is_free==!1?(n(),a("div",qe,"Intéressé ?")):g("",!0),e("div",Ue,[s.product.is_free==!0?(n(),a("div",Xe,[e("div",null,d(l(u).props.translations.message.gratuit),1)])):(n(),a("div",Ye,[e("div",null,d(s.product.price/100)+" €",1),e("div",null,d(s.product.token)+" token ",1)]))]),s.product.is_free==!1?(n(),a("form",Qe,[e("div",Ke,null,512),e("button",{onClick:R,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer "),He])):g("",!0),s.product.is_free==!1?(n(),a("form",Je,[e("div",et,null,512),e("button",{onClick:b,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer avec Token "),tt])):g("",!0)]),e("div",st,[e("div",ot,d(l(u).props.translations.message.relatif),1),e("div",rt,[(n(!0),a(E,null,M(s.relatif,(m,S)=>(n(),a("div",{key:S,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[c(l(N),{href:v.route("media",{product_id:m.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:y(()=>[m.extentionType=="image"?(n(),a("span",it,[e("img",{class:j([m.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${m.name}`,alt:"Product Image"},null,10,nt),m.is_free==!1?(n(),a("div",at,[c(l(h),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0)])):g("",!0),m.extentionType=="video"?(n(),a("span",lt,[e("video",{class:j([m.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${m.name}`,type:"video/mp4"},null,8,ct),C(" Your browser does not support the video tag. ")],2),m.is_free==!1?(n(),a("div",dt,[c(l(h),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0),e("div",ut,[c(l(h),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):g("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),mt],64))}};export{xt as default};
