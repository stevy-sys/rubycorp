import{_ as I}from"./AppLayout-CipFLCHn.js";import{I as m}from"./iconify-BnITr9jR.js";import{Q as T,o as n,f as a,b as u,w as k,F as S,a as e,n as b,u as l,h as f,i as w,t as p,j as C,y as R}from"./app-B63c1KuE.js";import"./ResponsiveNavLink-D8CtePQM.js";var E="https://js.stripe.com/v3",V=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,j="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",D=function(){for(var s=document.querySelectorAll('script[src^="'.concat(E,'"]')),r=0;r<s.length;r++){var i=s[r];if(V.test(i.src))return i}return null},z=function(s){var r="",i=document.createElement("script");i.src="".concat(E).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},B=function(s,r){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:r})},h=null,y=null,_=null,F=function(s){return function(){s(new Error("Failed to load Stripe.js"))}},G=function(s,r){return function(){window.Stripe?s(window.Stripe):r(new Error("Stripe.js not available"))}},N=function(s){return h!==null?h:(h=new Promise(function(r,i){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&s&&console.warn(j),window.Stripe){r(window.Stripe);return}try{var o=D();if(o&&s)console.warn(j);else if(!o)o=z(s);else if(o&&_!==null&&y!==null){var d;o.removeEventListener("load",_),o.removeEventListener("error",y),(d=o.parentNode)===null||d===void 0||d.removeChild(o),o=z(s)}_=G(r,i),y=F(i),o.addEventListener("load",_),o.addEventListener("error",y)}catch(c){i(c);return}}),h.catch(function(r){return h=null,Promise.reject(r)}))},W=function(s,r,i){if(s===null)return null;var o=s.apply(void 0,r);return B(o,i),o},g,P=!1,L=function(){return g||(g=N(null).catch(function(s){return g=null,Promise.reject(s)}),g)};Promise.resolve().then(function(){return L()}).catch(function(t){P||console.warn(t)});var $=function(){for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];P=!0;var o=Date.now();return L().then(function(d){return W(d,r,o)})};const A={class:"text-white"},M={class:"lg:flex justify-between"},X={class:"lg:w-[55%]"},q={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},Q={key:0,class:"block w-full h-full relative"},U=["src"],Y={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},K={key:1,class:"block w-full h-full relative"},O=["src"],Z={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},H={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},J={class:"p-5 border mt-10"},ee={class:"mt-5 font-bold text-xl"},te={class:"w-full mt-3"},re={class:"lg:w-[40%] mt-5 lg:mt-0"},se={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},oe=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),ie={class:"my-5"},ne={class:"my-5"},ae={class:"flex"},le={class:"border my-5 p-5 h-auto rounded bg-grey-500"},ce={key:0,class:"mb-2 font-bold text-xl"},de={class:"flex justify-start items-center"},ue={key:0},fe={key:1},me={key:1,class:"mt-5 text-white",id:"payment-form"},pe={class:"mb-2",ref:"cardElement",id:"card-element"},he=e("p",{id:"error-message"},null,-1),ge={class:"border my-5 p-5 rounded bg-grey-500"},ve={class:"mb-2 font-bold text-xl"},be={class:"flex justify-around flex-wrap p-5"},ye={key:0,class:"block w-full h-full"},_e=["src"],we={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},xe={key:1,class:"block w-full h-full"},ke=["src"],Se={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},je={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ze=e("div",{class:"mx-auto mt-[100px]"},null,-1),Te={__name:"Media",props:{product:Object,relatif:Array},setup(t){const s=t,r=T();console.log(r.props.translations.message);const i=async o=>{o.preventDefault();try{const d=await window.axios.get(`/create-checkout-session?product_id=${s.product.id}`);console.log("response",d);const c=d.data.id,v=await $("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!v){console.error("Échec du chargement de Stripe.");return}const{error:x}=await v.redirectToCheckout({sessionId:c});x&&console.error("Erreur lors de la redirection vers Stripe Checkout",x)}catch(d){console.error("Erreur lors de la création de la session de paiement",d)}};return(o,d)=>(n(),a(S,null,[u(I,{showSidebar:!1,title:"Dashboard"},{default:k(()=>[e("div",A,[e("div",M,[e("div",X,[e("div",q,[t.product.extentionType=="image"?(n(),a("span",Q,[e("img",{class:b([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${t.product.name}`,alt:"Product Image"},null,10,U),t.product.is_free==!1?(n(),a("div",Y,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0)])):f("",!0),t.product.extentionType=="video"?(n(),a("span",K,[e("video",{class:b([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${t.product.name}`,type:"video/mp4"},null,8,O),w(" Your browser does not support the video tag. ")],2),t.product.is_free==!1?(n(),a("div",Z,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0),e("div",H,[u(l(m),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):f("",!0)]),e("div",J,[e("div",ee,p(l(r).props.translations.message.description),1),e("div",te,p(t.product.description),1)])]),e("div",re,[e("div",se,[oe,e("div",ie,[e("span",null,p(l(r).props.translations.message.upload)+" : "+p(t.product.created_at),1)]),e("div",ne,[w(p(l(r).props.translations.message.partage)+" ",1),e("div",ae,[u(l(m),{class:"cursor-pointer hover:text-red-400",icon:"la:facebook-f",style:{"font-size":"30px","margin-left":"5px"},size:"2em"}),u(l(m),{class:"cursor-pointer hover:text-red-400",icon:"mdi:twitter",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})])])]),e("div",le,[t.product.is_free==!1?(n(),a("div",ce,"Intéressé ?")):f("",!0),e("div",de,[t.product.is_free==!0?(n(),a("div",ue,p(l(r).props.translations.message.gratuit),1)):(n(),a("div",fe,p(t.product.price/100)+" €",1))]),t.product.is_free==!1?(n(),a("form",me,[e("div",pe,null,512),e("button",{onClick:i,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer"),he])):f("",!0)]),e("div",ge,[e("div",ve,p(l(r).props.translations.message.relatif),1),e("div",be,[(n(!0),a(S,null,C(t.relatif,(c,v)=>(n(),a("div",{key:v,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[u(l(R),{href:o.route("media",{product_id:c.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:k(()=>[c.extentionType=="image"?(n(),a("span",ye,[e("img",{class:b([c.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${c.name}`,alt:"Product Image"},null,10,_e),c.is_free==!1?(n(),a("div",we,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0)])):f("",!0),c.extentionType=="video"?(n(),a("span",xe,[e("video",{class:b([c.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${c.name}`,type:"video/mp4"},null,8,ke),w(" Your browser does not support the video tag. ")],2),c.is_free==!1?(n(),a("div",Se,[u(l(m),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):f("",!0),e("div",je,[u(l(m),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):f("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),ze],64))}};export{Te as default};
