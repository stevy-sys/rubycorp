import{g as n,o as l,c as W,w as m,a as e,b as r,f as i,j as A,t as _,h as u,F as $,u as d,e as Z,l as N,p as q,m as O}from"./app-263AeSRm.js";import{_ as B}from"./ModalLayout-BVzndHUv.js";import{_ as R}from"./AdminLayout-C3RcNJo6.js";import{E as T,d as U,P as Y}from"./Picker-Cj4_YZer.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as h}from"./iconify-BNOEeQ8M.js";import"./ResponsiveNavLink-CtuvInFy.js";const o=c=>(q("data-v-6b7dade6"),c=c(),O(),c),J={class:"flex justify-end mb-5"},L={class:"text-white flex justify-center"},P={class:"w-[50%] border border-white h-auto rounded-xl p-2"},X=o(()=>e("div",{class:"relative mb-10"},[e("input",{class:"w-full text-black rounded-xl p-2 pr-12 border border-red-300 focus:border-red-500 focus:outline-none",type:"text",placeholder:"Recherche"}),e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-search absolute top-1/2 right-3 transform -translate-y-1/2 pointer-events-none"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})])],-1)),Q=["onClick"],K={class:"flex items-center p-2"},ee=o(()=>e("div",{class:"w-20 h-20 rounded-full overflow-hidden border border-white"},[e("img",{class:"w-full h-full object-cover",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdyhj65-Cz6UvgVh8YUCAQM_ElfcG0gJJ7NA&s",alt:""})],-1)),te={class:"ml-5"},se={class:"font-semibold text-[25px]"},oe={class:"flex items-center"},le=o(()=>e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",fill:"#f87171"}),e("path",{d:"M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6l-2 2v-2H4V4z",stroke:"#f87171","stroke-width":"1.5"}),e("path",{d:"M12 15l4-4-4-4",stroke:"#f87171","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),ie={class:"font-sans text-[12px] ml-1"},ae=o(()=>e("svg",{class:"mr-1 absolute left-[70px] bottom-3",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"green"},[e("circle",{cx:"8",cy:"8",r:"8"})],-1)),ne={class:"absolute z-100 right-4 top-1/2 transform -translate-y-1/2"},re=o(()=>e("circle",{cx:"12",cy:"6",r:"2",fill:"#333"},null,-1)),de=o(()=>e("circle",{cx:"12",cy:"12",r:"2",fill:"#333"},null,-1)),ce=o(()=>e("circle",{cx:"12",cy:"18",r:"2",fill:"#333"},null,-1)),ue=[re,de,ce],he={key:0,class:"absolute z-100 right-[10px] top-[25px] border bg-[#1e293b] rounded p-2 w-[200px]"},xe=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Voir profil",-1)),pe=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Archiver",-1)),ve=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Supprimmer",-1)),me=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Bloquer",-1)),_e=o(()=>e("p",{class:"hover:bg-[#1a1a1a] rounded text-center text-sm"},"Retirer",-1)),fe=[xe,pe,ve,me,_e],we={class:"flex justify-center"},be={key:0,class:"flex text-white w-[100%]"},ge={class:"w-full"},ye={class:"flex items-center"},ke=o(()=>e("div",{class:"w-[100px] h-[100px] relative rounded-full bg-red-500"},[e("img",{class:"w-[100px] h-[100px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"}),e("span",{class:"w-[20px] border bg-green-500 h-[20px] right-[6px] bottom-[6px] absolute rounded-full"})],-1)),Ce={class:"w-[75%] pl-10"},Me={class:"text-2xl"},je=o(()=>e("span",{class:"text-sm"},"4520 messages",-1)),Ae=o(()=>e("div",{class:"flex justify-center wrap"},[e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"}),e("div",{class:"w-[100px] h-[100px] mx-1 bg-red-400 border"})],-1)),$e={class:"flex justify-center"},Be={key:0,class:"mt-10 flex"},ze=o(()=>e("div",{class:"min-w-[50px]"},[e("img",{class:"w-[50px] h-[50px] rounded-full",src:"https://plus.unsplash.com/premium_photo-1664474619075-644dd191935f?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8aW1hZ2V8ZW58MHx8MHx8fDA%3D"})],-1)),He={class:"mx-5"},De={class:"relative max-w-[50%] min-w-[100px] py-5 px-5 border rounded-tr-[20px] rounded-bl-[20px] min-h-[50px]"},Ie=["src"],Ve=o(()=>e("span",{class:"text-sm ml-5 text-white mt-3"}," 20:45",-1)),Ee={key:1,class:"mt-10"},Fe={class:"mx-5 justify-end flex"},Se={class:"relative z-40 bg-red-400 max-w-[50%] py-5 px-5 rounded-tl-[20px] rounded-br-[20px] min-h-[50px]"},We={key:0,class:"justify-end flex"},Ze=["src"],Ne=o(()=>e("span",{class:"justify-end mt-3 flex text-sm mr-5 text-white"},"20:45",-1)),qe={key:0,class:"flex w-full mt-2 h-20 bg-[#1e293b] text-black z-50 border-none rounded-t-2xl"},Oe={class:"relative text-xs ml-5 mx-2 w-[30px] p-4 h-[30px] bg-green"},Re={class:"border rounded border-black w-[50px] h-[50px]"},Te=["src"],Ue={class:"flex justify-end items-center mt-2"},Ye={class:"flex items-center w-[20%]"},Ge={class:"ml-1"},Je={class:"ml-5"},Le={class:"w-[75%] ml-5 flex items-center"},Pe={class:"text-black w-full rounded-2xl"},Xe={class:"relative w-full"},Qe={key:0,class:"absolute right-2 bottom-[50px] z-[9999]"},Ke={__name:"Chat",props:{conversations:{type:Array},idAdmin:{type:Array}},setup(c){const z=c,b=n(!1),H=new T(U);n("");const D=a=>{p.value+=a.native},M=n(null),x=n(null),I=async a=>{const t=a.target.files[0];if(t){const s=new FileReader;s.onload=async()=>{x.value=await s.result},s.readAsDataURL(t)}},g=n([]),p=n(""),v=n(null),f=n(!1),w=n(null),V=async a=>{const t=await window.axios.get("/admin/getMessage/"+a.id);v.value=a,g.value=t.data.messages,f.value=!1,j()},E=async()=>{const a={message:p.value,conversation_id:v.value.id,file:x.value},t=await window.axios.post("/admin/sendMessage",a);g.value.push(t.data.message),v.value.last_message=t.data.message,p.value=await"",await j()},j=()=>{w.value&&(w.value.scrollTop=w.value.scrollHeight)},y=n(!1),k=n(!1),F=a=>z.idAdmin.filter(s=>s.id==a).length>0;return(a,t)=>(l(),W(R,null,{default:m(()=>[e("div",J,[e("button",{class:"px-5 border hover:bg-red-400",onClick:t[0]||(t[0]=s=>f.value=!0)},"Conversation")]),r(B,{classes:"text-white w-[75%]",isOpen:f.value},{content:m(()=>[e("div",L,[e("div",P,[X,(l(!0),i($,null,A(c.conversations,(s,C)=>(l(),i("div",{key:C,class:"relative bg-[#1a1a1a] hover:bg-[#1e293b] transition-colors duration-300"},[e("div",{onClick:S=>V(s),ss:"flex"},[e("div",K,[ee,e("div",te,[e("p",se,_(s.user.name),1),e("div",oe,[le,e("p",ie,_(s.last_message.message),1)])])])],8,Q),ae,e("div",ne,[(l(),i("svg",{class:"relative z-100",onClick:t[1]||(t[1]=S=>y.value=!y.value),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},ue)),y.value===!0?(l(),i("div",he,fe)):u("",!0)])]))),128))])])]),footer:m(()=>[e("div",we,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:t[2]||(t[2]=s=>f.value=!1)},"fermer")])]),_:1},8,["isOpen"]),v.value?(l(),i("div",be,[e("div",ge,[e("div",ye,[ke,e("div",Ce,[e("h1",Me,_(v.value.user.name),1),je]),e("div",{onClick:t[5]||(t[5]=s=>k.value=!0),class:"relative"},[r(d(h),{onClick:t[3]||(t[3]=()=>{}),class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:gallery-bold"}),r(B,{classes:"text-white w-[50%]",isOpen:k.value},{content:m(()=>[Ae]),footer:m(()=>[e("div",$e,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:t[4]||(t[4]=s=>k.value=!1)},"fermer")])]),_:1},8,["isOpen"])])]),e("div",{ref_key:"chatContainer",ref:w,class:"chat-container"},[(l(!0),i($,null,A(g.value,(s,C)=>(l(),i("div",{key:C},[F(s.user_id)?(l(),i("div",Ee,[e("div",Fe,[e("div",Se,_(s.message),1)]),s.mediable&&s.mediable.length>0?(l(),i("div",We,[e("img",{class:"w-[25%] h-auto border border-red-400 rounded mt-3 mr-5",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Ze)])):u("",!0),Ne])):(l(),i("div",Be,[ze,e("div",He,[e("div",De,_(s.message),1),s.mediable&&s.mediable.length>0?(l(),i("img",{key:0,class:"w-[25%] h-auto border rounded mt-3",src:`/storage/data/image/${s.mediable[0].name}`},null,8,Ie)):u("",!0),Ve])]))]))),128))],512),x.value?(l(),i("div",qe,[e("div",Oe,[e("div",Re,[e("img",{class:"w-[50px] h-[50px]",src:x.value,alt:"",srcset:""},null,8,Te)]),r(d(h),{onClick:t[6]||(t[6]=s=>x.value=null),class:"cursor-pointer absolute top-[10px] right-[6px] left-0 w-6 h-6 text-white",icon:"carbon:close-outline"})])])):u("",!0),e("div",Ue,[e("div",Ye,[e("div",Ge,[r(d(h),{onClick:t[7]||(t[7]=s=>{M.value.click()}),class:"cursor-pointer w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"gravity-ui:picture"}),e("input",{type:"file",ref_key:"fileInput",ref:M,onChange:I,class:"hidden"},null,544)]),e("div",Je,[r(d(h),{class:"w-10 h-10 text-white-500 transition duration-75 group-hover:text-white dark:group-hover:text-white",icon:"solar:file-bold"})])]),e("div",Le,[e("div",Pe,[e("div",Xe,[b.value?(l(),i("span",Qe,[r(d(Y),{data:d(H),set:"twitter",onSelect:D},null,8,["data"])])):u("",!0),Z(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>p.value=s),class:"border-none text-black w-full rounded-2xl pr-10 pl-4 py-2",type:"text"},null,512),[[N,p.value]]),r(d(h),{onClick:t[9]||(t[9]=s=>b.value=!b.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 text-[#1e293b]",icon:"fluent:emoji-smile-slight-24-filled"})])]),e("div",{onClick:E,class:"cursor-pointer w-10 h-10"},[r(d(h),{class:"w-10 h-10 text-[#1e293b] ml-1",icon:"fluent:send-48-filled"})])])])])])):u("",!0)]),_:1}))}},nt=G(Ke,[["__scopeId","data-v-6b7dade6"]]);export{nt as default};
