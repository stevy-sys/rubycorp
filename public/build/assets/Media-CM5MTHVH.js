import{_ as I}from"./AppLayout-m78Df98V.js";import{l as M}from"./index-CNOIStk_.js";import{I as p}from"./iconify-7qN0QMYr.js";import{g as _,o as s,f as o,a as e,t as n,k as P,e as D,l as B,F as j,j as S,i as $,Q as V,b as r,w as x,n as k,u as l,h as a,y as F}from"./app-ctRuoYWV.js";import{_ as C}from"./ModalLayout-BmffLRSV.js";import"./ResponsiveNavLink-Bm7QRUV3.js";const L={class:"w-full lg:w-[50%] bg-white dark:bg-gray-900 py-8 lg:py-16 antialiased"},N={class:"w-auto mx-auto px-4"},O={class:"flex justify-between items-center mb-6"},E={class:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white"},Z={class:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700"},G=e("label",{for:"comment",class:"sr-only"},"Your comment",-1),R=e("button",{type:"submit",class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800"}," Post comment ",-1),Y={class:"p-6 text-base bg-white rounded-lg dark:bg-gray-900"},A={class:"flex justify-between items-center mb-2"},Q={class:"flex items-center"},W={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold"},K=e("img",{class:"mr-2 w-6 h-6 rounded-full",src:"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:"Michael Gough"},null,-1),U=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("time",{pubdate:"",datetime:"2022-02-08",title:"February 8th, 2022"})],-1),X=e("button",{id:"dropdownComment1Button","data-dropdown-toggle":"dropdownComment1",class:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button"},[e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3"},[e("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})]),e("span",{class:"sr-only"},"Comment settings")],-1),q={class:"text-gray-500 dark:text-gray-400"},H={__name:"CommentsSection",props:{product:Object},setup(t){var v;const c=t,g=_((v=c==null?void 0:c.product)==null?void 0:v.comments),f=_({description:""}),y=async()=>{var h;const d=await window.axios.post("/user/sendComments",{description:f.value.description,product_id:c.product.id});g.value.unshift((h=d==null?void 0:d.data)==null?void 0:h.data),f.value.description=""};return(d,h)=>(s(),o("section",L,[e("div",N,[e("div",O,[e("h2",E,"Discussion ("+n(g.value.length)+")",1)]),e("form",{onSubmit:P(y,["prevent"]),class:"mb-6"},[e("div",Z,[G,D(e("textarea",{"onUpdate:modelValue":h[0]||(h[0]=b=>f.value.description=b),id:"comment",rows:"6",class:"px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800",placeholder:"Write a comment...",required:""},null,512),[[B,f.value.description]])]),R],32),(s(!0),o(j,null,S(g.value,b=>(s(),o("article",Y,[e("footer",A,[e("div",Q,[e("p",W,[K,$(n(b.user.name),1)]),U]),X]),e("p",q,n(b.description),1)]))),256))])]))}},J=e("div",{class:"border rounded-lg shadow-lg px-6 py-8 max-w-md mx-auto mt-8"}," vous avez acheter ce produit avec votre token ",-1),ee={class:"flex justify-end"},te={class:"text-white"},se={class:"lg:flex justify-between"},oe={class:"lg:w-[55%]"},ie={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},re={key:0,class:"block w-full h-full relative"},le={key:0,class:"block w-full h-full relative"},ne=["src"],ae={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ce={key:1,class:"block w-full h-full relative"},de=["src"],ue={key:1,class:"block w-full h-full relative"},me=["src"],pe={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},fe={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},he={class:"flex justify-between items-center border-t-2 border-b-2 mt-2 h-10"},ge={class:"hover:text-[#1e293b] leading-3 text-md underline ml-2 transition duration-300"},be={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},xe={class:"hover:text-[#1e293b] mr-2 leading-3 text-md underline transition duration-300"},_e={class:"flex justify-center wrap"},ye={class:"flex justify-center"},ve={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},we=e("span",null,null,-1),ke={class:"p-5 border mt-10"},je={class:"mt-5 font-bold text-xl"},$e={class:"w-full mt-3"},ze={class:"lg:w-[40%] mt-5 lg:mt-0"},Ce={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},Se=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),Te={class:"my-5"},Ie={key:0,class:"border my-5 p-5 h-auto rounded bg-grey-500"},Me={key:0,class:"mb-2 font-bold text-xl"},Pe={class:"flex justify-start items-center"},De={key:0},Be={key:1},Ve={key:1,class:"mt-5 text-white",id:"payment-form"},Fe={class:"mb-2",ref:"cardElement",id:"card-element"},Le=e("p",{id:"error-message"},null,-1),Ne={key:2,class:"mt-5 text-white",id:"payment-form"},Oe={class:"mb-2",ref:"cardElement",id:"card-element"},Ee=e("p",{id:"error-message"},null,-1),Ze={class:"border my-5 p-5 rounded bg-grey-500"},Ge={class:"mb-2 font-bold text-xl"},Re={class:"flex justify-around flex-wrap p-5"},Ye={key:0,class:"block w-full h-full"},Ae=["src"],Qe={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},We={key:1,class:"block w-full h-full"},Ke=["src"],Ue={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Xe={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},qe=e("div",{class:"mx-auto mt-[100px]"},null,-1),it={__name:"Media",props:{product:Object,relatif:Array},setup(t){const c=t,g=_(c.product.likes.length),f=_(c.product.isLike),y=_(!1),v=_(!1),d=V();console.log(d.props.translations.message);const h=async()=>{const u=await window.axios.get(`/user/like?product_id=${c.product.id}`);g.value=u.data.data.likes.length,f.value=u.data.data.isLike},b=async()=>{const u=d.props.auth.user.token;if(c.product.token>u)return alert("pas assez de token");await window.axios.post("/payment/token",{product_id:c.product.id}),v.value=!0},T=async u=>{u.preventDefault();try{const m=await window.axios.get(`/create-checkout-session?product_id=${c.product.id}`);console.log("response",m);const i=m.data.id,w=await M("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!w){console.error("Échec du chargement de Stripe.");return}const{error:z}=await w.redirectToCheckout({sessionId:i});z&&console.error("Erreur lors de la redirection vers Stripe Checkout",z)}catch(m){console.error("Erreur lors de la création de la session de paiement",m)}};return(u,m)=>(s(),o(j,null,[r(I,{showSidebar:!1,title:"Dashboard"},{default:x(()=>[r(C,{classes:"w-auto text-white ",isOpen:v.value},{content:x(()=>[J]),footer:x(()=>[e("div",ee,[e("button",{class:"border px-3 mx-1 flex justify-end",onClick:m[0]||(m[0]=i=>u.window.location.reload())},"fermer")])]),_:1},8,["isOpen"]),e("div",te,[e("div",se,[e("div",oe,[e("div",ie,[t.product.extentionType=="image"?(s(),o("span",re,[u.$page.props.auth.user.is_subscribe?(s(),o("span",ce,[e("img",{class:"w-full h-full object-cover",src:`/storage/data/image/${t.product.name}`,alt:"Product Image"},null,8,de)])):(s(),o("span",le,[e("img",{class:k([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${t.product.name}`,alt:"Product Image"},null,10,ne),t.product.is_free==!1?(s(),o("span",ae,[r(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):a("",!0)]))])):a("",!0),t.product.extentionType=="video"?(s(),o("span",ue,[e("video",{class:k([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${t.product.name}`,type:"video/mp4"},null,8,me),$(" Your browser does not support the video tag. ")],2),t.product.is_free==!1?(s(),o("div",pe,[r(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):a("",!0),e("div",fe,[r(l(p),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):a("",!0)]),e("div",he,[e("div",{onClick:h,class:"flex cursor-pointer items-center"},[e("p",ge,[r(l(p),{class:"cursor-pointer hover:text-red-400",icon:"flat-color-icons:like",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),e("span",be,n(f.value==!0?"je n'aime plus":"j'aime")+" ("+n(g.value)+") ",1)]),e("div",{onClick:m[2]||(m[2]=i=>y.value=!0),class:"flex items-center cursor-pointer"},[e("p",xe,[r(l(p),{class:"cursor-pointer hover:text-red-400",icon:"fa:comments-o",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),r(C,{classes:"text-white w-full",isOpen:y.value},{content:x(()=>[e("div",_e,[r(H,{product:t.product},null,8,["product"])])]),footer:x(()=>[e("div",ye,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:m[1]||(m[1]=i=>y.value=!1)},"fermer")])]),_:1},8,["isOpen"]),e("span",ve,"Commentaire ("+n(t.product.comments.length)+")",1)]),e("div",null,[r(l(p),{icon:"material-symbols:share",class:"text-white hover:text-[#1e293b] transition duration-300",style:{"font-size":"30px","margin-right":"5px"},size:"2em"}),we])]),e("div",ke,[e("div",je,n(l(d).props.translations.message.description),1),e("div",$e,n(t.product.description),1)])]),e("div",ze,[e("div",Ce,[Se,e("div",Te,[e("span",null,n(l(d).props.translations.message.upload)+" : "+n(t.product.created_at),1)])]),u.$page.props.auth.user.is_subscribe?a("",!0):(s(),o("div",Ie,[t.product.is_free==!1?(s(),o("div",Me,"Intéressé ?")):a("",!0),e("div",Pe,[t.product.is_free==!0?(s(),o("div",De,[e("div",null,n(l(d).props.translations.message.gratuit),1)])):(s(),o("div",Be,[e("div",null,n(t.product.price/100)+" €",1),e("div",null,n(t.product.token)+" token ",1)]))]),t.product.is_free==!1?(s(),o("form",Ve,[e("div",Fe,null,512),e("button",{onClick:T,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer "),Le])):a("",!0),t.product.is_free==!1?(s(),o("form",Ne,[e("div",Oe,null,512),e("button",{onClick:b,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer avec Token "),Ee])):a("",!0)])),e("div",Ze,[e("div",Ge,n(l(d).props.translations.message.relatif),1),e("div",Re,[(s(!0),o(j,null,S(t.relatif,(i,w)=>(s(),o("div",{key:w,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[r(l(F),{href:u.route("media",{product_id:i.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:x(()=>[i.extentionType=="image"?(s(),o("span",Ye,[e("img",{class:k([i.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${i.name}`,alt:"Product Image"},null,10,Ae),i.is_free==!1?(s(),o("div",Qe,[r(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):a("",!0)])):a("",!0),i.extentionType=="video"?(s(),o("span",We,[e("video",{class:k([i.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${i.name}`,type:"video/mp4"},null,8,Ke),$(" Your browser does not support the video tag. ")],2),i.is_free==!1?(s(),o("div",Ue,[r(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):a("",!0),e("div",Xe,[r(l(p),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):a("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),qe],64))}};export{it as default};
