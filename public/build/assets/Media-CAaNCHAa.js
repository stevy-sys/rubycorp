import{_ as L}from"./AppLayout--9Q884xb.js";import{I as f}from"./iconify-BNbmWbNy.js";import{o as l,f as a,b as c,w,F as k,a as e,n as v,u,h as d,i as y,t as _,j as I,x as T}from"./app-CRG8-m-B.js";import"./ResponsiveNavLink-DwEi84_s.js";var z="https://js.stripe.com/v3",C=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",D=function(){for(var r=document.querySelectorAll('script[src^="'.concat(z,'"]')),s=0;s<r.length;s++){var i=r[s];if(C.test(i.src))return i}return null},j=function(r){var s="",i=document.createElement("script");i.src="".concat(z).concat(s);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(i),i},R=function(r,s){!r||!r._registerWrapper||r._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:s})},h=null,g=null,b=null,V=function(r){return function(){r(new Error("Failed to load Stripe.js"))}},G=function(r,s){return function(){window.Stripe?r(window.Stripe):s(new Error("Stripe.js not available"))}},B=function(r){return h!==null?h:(h=new Promise(function(s,i){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe&&r&&console.warn(S),window.Stripe){s(window.Stripe);return}try{var o=D();if(o&&r)console.warn(S);else if(!o)o=j(r);else if(o&&b!==null&&g!==null){var n;o.removeEventListener("load",b),o.removeEventListener("error",g),(n=o.parentNode)===null||n===void 0||n.removeChild(o),o=j(r)}b=G(s,i),g=V(i),o.addEventListener("load",b),o.addEventListener("error",g)}catch(m){i(m);return}}),h.catch(function(s){return h=null,Promise.reject(s)}))},F=function(r,s,i){if(r===null)return null;var o=r.apply(void 0,s);return R(o,i),o},p,E=!1,P=function(){return p||(p=B(null).catch(function(r){return p=null,Promise.reject(r)}),p)};Promise.resolve().then(function(){return P()}).catch(function(t){E||console.warn(t)});var N=function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];E=!0;var o=Date.now();return P().then(function(n){return F(n,s,o)})};const W={class:"text-white"},$={class:"lg:flex justify-between"},A={class:"lg:w-[55%]"},M={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},X={key:0,class:"block w-full h-full relative"},q=["src"],U={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Y={key:1,class:"block w-full h-full relative"},K=["src"],O={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Q={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Z={class:"p-5 border mt-10"},H=e("div",{class:"mt-5 font-bold text-xl"},"Descriptions",-1),J={class:"w-full mt-3"},ee={class:"lg:w-[40%] mt-5 lg:mt-0"},te={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},re=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),oe={class:"my-5"},se={class:"my-5"},ie={class:"flex"},ne={class:"border my-5 p-5 h-auto rounded bg-grey-500"},le={key:0,class:"mb-2 font-bold text-xl"},ae={class:"flex justify-start items-center"},ce={key:0},de={key:1},ue={key:1,class:"mt-5 text-white",id:"payment-form"},fe={class:"mb-2",ref:"cardElement",id:"card-element"},me=e("p",{id:"error-message"},null,-1),he={class:"border my-5 p-5 rounded bg-grey-500"},pe=e("div",{class:"mb-2 font-bold text-xl"},"Produits relatifs",-1),ve={class:"flex justify-around flex-wrap p-5"},ge={key:0,class:"block w-full h-full"},be=["src"],ye={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},_e={key:1,class:"block w-full h-full"},xe=["src"],we={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ke={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Se=e("div",{class:"mx-auto mt-[100px]"},null,-1),Le={__name:"Media",props:{product:Object,relatif:Array},setup(t){const r=t,s=async i=>{i.preventDefault();try{const o=await window.axios.get(`/create-checkout-session?product_id=${r.product.id}`);console.log("response",o);const n=o.data.id,m=await N("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!m){console.error("Échec du chargement de Stripe.");return}const{error:x}=await m.redirectToCheckout({sessionId:n});x&&console.error("Erreur lors de la redirection vers Stripe Checkout",x)}catch(o){console.error("Erreur lors de la création de la session de paiement",o)}};return(i,o)=>(l(),a(k,null,[c(L,{showSidebar:!1,title:"Dashboard"},{default:w(()=>[e("div",W,[e("div",$,[e("div",A,[e("div",M,[t.product.extentionType=="image"?(l(),a("span",X,[e("img",{class:v([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${t.product.name}`,alt:"Product Image"},null,10,q),t.product.is_free==!1?(l(),a("div",U,[c(u(f),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):d("",!0)])):d("",!0),t.product.extentionType=="video"?(l(),a("span",Y,[e("video",{class:v([t.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${t.product.name}`,type:"video/mp4"},null,8,K),y(" Your browser does not support the video tag. ")],2),t.product.is_free==!1?(l(),a("div",O,[c(u(f),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):d("",!0),e("div",Q,[c(u(f),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):d("",!0)]),e("div",Z,[H,e("div",J,_(t.product.description),1)])]),e("div",ee,[e("div",te,[re,e("div",oe,[e("span",null,"upload : "+_(t.product.created_at),1)]),e("div",se,[y("Partager sur : "),e("div",ie,[c(u(f),{class:"cursor-pointer hover:text-red-400",icon:"la:facebook-f",style:{"font-size":"30px","margin-left":"5px"},size:"2em"}),c(u(f),{class:"cursor-pointer hover:text-red-400",icon:"mdi:twitter",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})])])]),e("div",ne,[t.product.is_free==!1?(l(),a("div",le,"Intéressé ?")):d("",!0),e("div",ae,[t.product.is_free==!0?(l(),a("div",ce,"Gratuit")):(l(),a("div",de,_(t.product.price/100)+" €",1))]),t.product.is_free==!1?(l(),a("form",ue,[e("div",fe,null,512),e("button",{onClick:s,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer"),me])):d("",!0)]),e("div",he,[pe,e("div",ve,[(l(!0),a(k,null,I(t.relatif,(n,m)=>(l(),a("div",{key:m,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[c(u(T),{href:i.route("media",{product_id:n.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:w(()=>[n.extentionType=="image"?(l(),a("span",ge,[e("img",{class:v([n.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${n.name}`,alt:"Product Image"},null,10,be),n.is_free==!1?(l(),a("div",ye,[c(u(f),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):d("",!0)])):d("",!0),n.extentionType=="video"?(l(),a("span",_e,[e("video",{class:v([n.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${n.name}`,type:"video/mp4"},null,8,xe),y(" Your browser does not support the video tag. ")],2),n.is_free==!1?(l(),a("div",we,[c(u(f),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):d("",!0),e("div",ke,[c(u(f),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):d("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),Se],64))}};export{Le as default};
