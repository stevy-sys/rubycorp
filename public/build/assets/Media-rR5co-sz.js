import{_ as V}from"./AppLayout-DDUDrLQf.js";import{I as p}from"./iconify-DZ863ePf.js";import{g as y,o as n,f as a,a as e,t as u,k as B,e as R,l as F,F as C,j as I,i as $,Q as G,b as d,w as k,n as S,u as l,h as g,y as W}from"./app-JIn5gidd.js";import{_ as A}from"./ModalLayout-DnvFCw8I.js";import"./ResponsiveNavLink-DW2t3xQw.js";var T="https://js.stripe.com/v3",N=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,L="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",O=function(){for(var t=document.querySelectorAll('script[src^="'.concat(T,'"]')),r=0;r<t.length;r++){var o=t[r];if(N.test(o.src))return o}return null},P=function(t){var r="",o=document.createElement("script");o.src="".concat(T).concat(r);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(o),o},Z=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"4.2.0",startTime:r})},b=null,j=null,z=null,q=function(t){return function(){t(new Error("Failed to load Stripe.js"))}},U=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},X=function(t){return b!==null?b:(b=new Promise(function(r,o){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&t&&console.warn(L),window.Stripe){r(window.Stripe);return}try{var i=O();if(i&&t)console.warn(L);else if(!i)i=P(t);else if(i&&z!==null&&j!==null){var c;i.removeEventListener("load",z),i.removeEventListener("error",j),(c=i.parentNode)===null||c===void 0||c.removeChild(i),i=P(t)}z=U(r,o),j=q(o),i.addEventListener("load",z),i.addEventListener("error",j)}catch(x){o(x);return}}),b.catch(function(r){return b=null,Promise.reject(r)}))},Y=function(t,r,o){if(t===null)return null;var i=t.apply(void 0,r);return Z(i,o),i},_,M=!1,D=function(){return _||(_=X(null).catch(function(t){return _=null,Promise.reject(t)}),_)};Promise.resolve().then(function(){return D()}).catch(function(s){M||console.warn(s)});var Q=function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];M=!0;var i=Date.now();return D().then(function(c){return Y(c,r,i)})};const K={class:"w-full lg:w-[50%] bg-white dark:bg-gray-900 py-8 lg:py-16 antialiased"},H={class:"w-auto mx-auto px-4"},J={class:"flex justify-between items-center mb-6"},ee={class:"text-lg lg:text-2xl font-bold text-gray-900 dark:text-white"},te={class:"py-2 px-4 mb-4 bg-white rounded-lg rounded-t-lg border border-gray-200 dark:bg-gray-800 dark:border-gray-700"},se=e("label",{for:"comment",class:"sr-only"},"Your comment",-1),re=e("button",{type:"submit",class:"inline-flex items-center py-2.5 px-4 text-xs font-medium text-center text-white bg-primary-700 rounded-lg focus:ring-4 focus:ring-primary-200 dark:focus:ring-primary-900 hover:bg-primary-800"}," Post comment ",-1),oe={class:"p-6 text-base bg-white rounded-lg dark:bg-gray-900"},ie={class:"flex justify-between items-center mb-2"},ne={class:"flex items-center"},ae={class:"inline-flex items-center mr-3 text-sm text-gray-900 dark:text-white font-semibold"},le=e("img",{class:"mr-2 w-6 h-6 rounded-full",src:"https://flowbite.com/docs/images/people/profile-picture-2.jpg",alt:"Michael Gough"},null,-1),ce=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},[e("time",{pubdate:"",datetime:"2022-02-08",title:"February 8th, 2022"})],-1),de=e("button",{id:"dropdownComment1Button","data-dropdown-toggle":"dropdownComment1",class:"inline-flex items-center p-2 text-sm font-medium text-center text-gray-500 dark:text-gray-400 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-50 dark:bg-gray-900 dark:hover:bg-gray-700 dark:focus:ring-gray-600",type:"button"},[e("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 3"},[e("path",{d:"M2 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm6.041 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM14 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z"})]),e("span",{class:"sr-only"},"Comment settings")],-1),ue={class:"text-gray-500 dark:text-gray-400"},me={__name:"CommentsSection",props:{product:Object},setup(s){var c;const t=s,r=y((c=t==null?void 0:t.product)==null?void 0:c.comments),o=y({description:""}),i=async()=>{var v;const x=await window.axios.post("/user/sendComments",{description:o.value.description,product_id:t.product.id});r.value.unshift((v=x==null?void 0:x.data)==null?void 0:v.data),o.value.description=""};return(x,v)=>(n(),a("section",K,[e("div",H,[e("div",J,[e("h2",ee,"Discussion ("+u(r.value.length)+")",1)]),e("form",{onSubmit:B(i,["prevent"]),class:"mb-6"},[e("div",te,[se,R(e("textarea",{"onUpdate:modelValue":v[0]||(v[0]=f=>o.value.description=f),id:"comment",rows:"6",class:"px-0 w-full text-sm text-gray-900 border-0 focus:ring-0 focus:outline-none dark:text-white dark:placeholder-gray-400 dark:bg-gray-800",placeholder:"Write a comment...",required:""},null,512),[[F,o.value.description]])]),re],32),(n(!0),a(C,null,I(r.value,f=>(n(),a("article",oe,[e("footer",ie,[e("div",ne,[e("p",ae,[le,$(u(f.user.name),1)]),ce]),de]),e("p",ue,u(f.description),1)]))),256))])]))}},fe={class:"text-white"},pe={class:"lg:flex justify-between"},ge={class:"lg:w-[55%]"},he={class:"w-full bg-red-500 h-[500px] rounded-lg relative"},xe={key:0,class:"block w-full h-full relative"},ve=["src"],be={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},_e={key:1,class:"block w-full h-full relative"},ye=["src"],we={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ke={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},Se={class:"flex justify-between items-center border-t-2 border-b-2 mt-2 h-10"},je={class:"hover:text-[#1e293b] leading-3 text-md underline ml-2 transition duration-300"},ze={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},$e={class:"hover:text-[#1e293b] mr-2 leading-3 text-md underline transition duration-300"},Ce={class:"flex justify-center wrap"},Ee={class:"flex justify-center"},Le={class:"hover:text-[#1e293b] underline text-[12px] transition duration-300"},Pe=e("span",null,null,-1),Ie={class:"p-5 border mt-10"},Te={class:"mt-5 font-bold text-xl"},Me={class:"w-full mt-3"},De={class:"lg:w-[40%] mt-5 lg:mt-0"},Ve={class:"border mb-5 p-5 h-auto rounded bg-grey-500"},Be=e("div",{class:"mb-2 font-bold text-xl"},"Details",-1),Re={class:"my-5"},Fe={class:"my-5"},Ge={class:"flex"},We={class:"border my-5 p-5 h-auto rounded bg-grey-500"},Ae={key:0,class:"mb-2 font-bold text-xl"},Ne={class:"flex justify-start items-center"},Oe={key:0},Ze={key:1},qe={key:1,class:"mt-5 text-white",id:"payment-form"},Ue={class:"mb-2",ref:"cardElement",id:"card-element"},Xe=e("p",{id:"error-message"},null,-1),Ye={class:"border my-5 p-5 rounded bg-grey-500"},Qe={class:"mb-2 font-bold text-xl"},Ke={class:"flex justify-around flex-wrap p-5"},He={key:0,class:"block w-full h-full"},Je=["src"],et={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},tt={key:1,class:"block w-full h-full"},st=["src"],rt={key:0,class:"absolute z-10 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},ot={class:"absolute z-20 inset-0 flex items-center justify-center bg-white bg-opacity-60 rounded-lg"},it=e("div",{class:"mx-auto mt-[100px]"},null,-1),ut={__name:"Media",props:{product:Object,relatif:Array},setup(s){const t=s,r=y(t.product.likes.length),o=y(t.product.isLike),i=y(!1),c=G();console.log(c.props.translations.message);const x=async()=>{const f=await window.axios.get(`/user/like?product_id=${t.product.id}`);r.value=f.data.data.likes.length,o.value=f.data.data.isLike},v=async f=>{f.preventDefault();try{const h=await window.axios.get(`/create-checkout-session?product_id=${t.product.id}`);console.log("response",h);const m=h.data.id,w=await Q("pk_test_51PkRRP2MBhGS3IWFTGLplKKcFukYg76dRAzhXsMXSjjSaQDNdW3dgabblGZcQx7U1SVd1LDkVdoR9BgIdThPw5jz00hNF4xZys");if(!w){console.error("Échec du chargement de Stripe.");return}const{error:E}=await w.redirectToCheckout({sessionId:m});E&&console.error("Erreur lors de la redirection vers Stripe Checkout",E)}catch(h){console.error("Erreur lors de la création de la session de paiement",h)}};return(f,h)=>(n(),a(C,null,[d(V,{showSidebar:!1,title:"Dashboard"},{default:k(()=>[e("div",fe,[e("div",pe,[e("div",ge,[e("div",he,[s.product.extentionType=="image"?(n(),a("span",xe,[e("img",{class:S([s.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${s.product.name}`,alt:"Product Image"},null,10,ve),s.product.is_free==!1?(n(),a("div",be,[d(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0)])):g("",!0),s.product.extentionType=="video"?(n(),a("span",_e,[e("video",{class:S([s.product.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${s.product.name}`,type:"video/mp4"},null,8,ye),$(" Your browser does not support the video tag. ")],2),s.product.is_free==!1?(n(),a("div",we,[d(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0),e("div",ke,[d(l(p),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):g("",!0)]),e("div",Se,[e("div",{onClick:x,class:"flex cursor-pointer items-center"},[e("p",je,[d(l(p),{class:"cursor-pointer hover:text-red-400",icon:"flat-color-icons:like",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),e("span",ze,u(o.value==!0?"je n'aime plus":"j'aime")+" ("+u(r.value)+") ",1)]),e("div",{onClick:h[1]||(h[1]=m=>i.value=!0),class:"flex items-center cursor-pointer"},[e("p",$e,[d(l(p),{class:"cursor-pointer hover:text-red-400",icon:"fa:comments-o",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})]),d(A,{classes:"text-white w-full",isOpen:i.value},{content:k(()=>[e("div",Ce,[d(me,{product:s.product},null,8,["product"])])]),footer:k(()=>[e("div",Ee,[e("button",{class:"px-3 py-2 rounded-lg bg-blue-400",onClick:h[0]||(h[0]=m=>i.value=!1)},"fermer")])]),_:1},8,["isOpen"]),e("span",Le,"Commentaire ("+u(s.product.comments.length)+")",1)]),e("div",null,[d(l(p),{icon:"material-symbols:share",class:"text-white hover:text-[#1e293b] transition duration-300",style:{"font-size":"30px","margin-right":"5px"},size:"2em"}),Pe])]),e("div",Ie,[e("div",Te,u(l(c).props.translations.message.description),1),e("div",Me,u(s.product.description),1)])]),e("div",De,[e("div",Ve,[Be,e("div",Re,[e("span",null,u(l(c).props.translations.message.upload)+" : "+u(s.product.created_at),1)]),e("div",Fe,[$(u(l(c).props.translations.message.partage)+" ",1),e("div",Ge,[d(l(p),{class:"cursor-pointer hover:text-red-400",icon:"la:facebook-f",style:{"font-size":"30px","margin-left":"5px"},size:"2em"}),d(l(p),{class:"cursor-pointer hover:text-red-400",icon:"mdi:twitter",style:{"font-size":"30px","margin-left":"5px"},size:"2em"})])])]),e("div",We,[s.product.is_free==!1?(n(),a("div",Ae,"Intéressé ?")):g("",!0),e("div",Ne,[s.product.is_free==!0?(n(),a("div",Oe,u(l(c).props.translations.message.gratuit),1)):(n(),a("div",Ze,u(s.product.price/100)+" €",1))]),s.product.is_free==!1?(n(),a("form",qe,[e("div",Ue,null,512),e("button",{onClick:v,class:"border px-5 py-1 rounded-lg bg-red-500 text-white",type:"submit",id:"pay-button"},"Payer"),Xe])):g("",!0)]),e("div",Ye,[e("div",Qe,u(l(c).props.translations.message.relatif),1),e("div",Ke,[(n(!0),a(C,null,I(s.relatif,(m,w)=>(n(),a("div",{key:w,class:"rounded-lg mx-1 my-1 w-[70px] h-[70px]"},[d(l(W),{href:f.route("media",{product_id:m.id}),class:"relative px-1 my-2 rounded-lg cursor-pointer overflow-hidden w-[70px] h-[70px]"},{default:k(()=>[m.extentionType=="image"?(n(),a("span",He,[e("img",{class:S([m.is_free==!1?"filter blur":"","w-full h-full object-cover"]),src:`/storage/data/image/${m.name}`,alt:"Product Image"},null,10,Je),m.is_free==!1?(n(),a("div",et,[d(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0)])):g("",!0),m.extentionType=="video"?(n(),a("span",tt,[e("video",{class:S([m.is_free==!1?"filter blur":"","w-full h-full object-cover"]),controls:""},[e("source",{src:`/storage/data/image/${m.name}`,type:"video/mp4"},null,8,st),$(" Your browser does not support the video tag. ")],2),m.is_free==!1?(n(),a("div",rt,[d(l(p),{icon:"material-symbols:lock",style:{color:"black","font-size":"30px","margin-right":"5px"},size:"2em"})])):g("",!0),e("div",ot,[d(l(p),{icon:"icon-park-twotone:play",style:{color:"black","font-size":"50px","margin-right":"5px"},size:"2em"})])])):g("",!0)]),_:2},1032,["href"])]))),128))])])])])])]),_:1}),it],64))}};export{ut as default};
